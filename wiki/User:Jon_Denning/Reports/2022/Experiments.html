<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>User:Jon Denning/Reports/2022/Experiments - Blender Developer Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"User","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":2,"wgPageName":"User:Jon_Denning/Reports/2022/Experiments","wgTitle":"Jon Denning/Reports/2022/Experiments","wgCurRevisionId":31129,"wgRevisionId":31129,"wgArticleId":6343,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"User:Jon_Denning/Reports/2022/Experiments","wgRelevantArticleId":6343,"wgRequestId":"809f25038a25be6cb7976885","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgRelevantUserName":"Jon Denning","wgWikiEditorEnabledModules":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","site":"ready","user.options":"ready","user.tokens":"loading","ext.pygments":"ready","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","skins.bootstrap":"ready"});mw.loader.implement("user.tokens@1lo3932",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.bootstrap.js"]);});</script>
<link rel="stylesheet" href="../../../../w/load.php%3Fdebug=false&amp;lang=en&amp;modules=ext.pygments|mediawiki.legacy.commonPrint,shared|mediawiki.sectionAnchor|skins.bootstrap&amp;only=styles&amp;skin=bootstrap.css"/>
<script async="" src="../../../../w/load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=bootstrap"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="../../../../w/load.php%3Fdebug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=bootstrap.css"/>
<meta name="generator" content="MediaWiki 1.31.10"/>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
<link rel="shortcut icon" href="../../../../favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://wiki.blender.org/w/opensearch_desc.php" title="Blender Developer Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.blender.org/w/api.php?action=rsd"/>
<link rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"/>
<link rel="alternate" type="application/atom+xml" title="Blender Developer Wiki Atom feed" href="https://wiki.blender.org/w/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<script defer data-domain="wiki.blender.org" src="https://analytics.blender.org/js/script.js"></script>
<!--[if lt IE 9]><script src="/w/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=bootstrap&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-2 ns-subject page-User_Jon_Denning_Reports_2022_Experiments rootpage-User_Jon_Denning skin-bootstrap action-view"><style>
   @font-face {
      font-family: "Heebo";
      src: url("https://www.blender.org/wp-content/themes/bthree/assets_shared/font/Heebo/Heebo-VariableFont_wght.ttf") format("truetype-variations");
      font-weight: normal;
      font-variation-settings: "wght" var(--font-weight);
      font-style: normal
    }
</style>

<style>
  /* This style block is copied across all sites using the developer navbar.
   * For custom styling on this website, add a <style> block after this one. */

  /* Variables. */
  .nav-global {
    -webkit-font-smoothing: antialiased;

    --nav-global-color-bg: hsl(213, 10%, 14%);
    --nav-global-color-text: hsl(213, 5%, 64%);
    --nav-global-color-text-secondary: hsl(213, 5%, 44%);
    --nav-global-color-text-highlight: hsl(213, 5%, 84%);
    --nav-global-color-text-hover: white;
    --nav-global-color-text-active: white;

    --nav-global-color-primary: hsl(204, 98%, 54%);
    --nav-global-color-primary-bg: hsla(204, 100%, 46%, .1);

    --nav-global-color-button-bg-hover: hsl(213, 10%, 24%);
    --nav-global-color-button-text: var(--nav-global-color-text);

    --nav-global-color-menu-bg: var(--nav-global-color-bg);
    --nav-global-color-menu-border: hsl(213, 10%, 18%);

    --nav-global-color-menu-zindex: 1040;

    --nav-global-box-shadow-menu: 0px 5px 15px -2px rgba(0, 0, 0, 0.33), 0px 5px 15px -5px rgba(0, 0, 0, 0.33);
    --nav-global-box-shadow-menu-item: 0px 1px 4px 0px rgba(0, 0, 0, 0.05), 0px 15px 20px -1px rgba(0, 0, 0, 0.025);

    --nav-global-navbar-height: var(--navbar-primary-height, 56px);

    --nav-global-spacer: 15px;
    --nav-global-spacer-sm: 10px;
    --nav-global-spacer-xs: 5px;

    --nav-global-border-radius: 6px;
    --nav-global-border-radius-lg: 10px;

    --nav-global-button-height: 35px;
    --nav-global-link-padding-x: var(--nav-global-spacer);
    --nav-global-link-padding-y: var(--nav-global-spacer-sm);

    --nav-global-font-size: 14px;
    --nav-global-transition-speed: 150ms;
  }

  /* Reset. */
  @namespace svg "http://www.w3.org/2000/svg";

  .nav-global :not(svg|*),
  .nav-global *::before,
  .nav-global *::after {
    -webkit-box-sizing: border-box;

    all: unset;
    display: revert;
    box-sizing: border-box;
  }

  .nav-global [default-styles] {
    all: revert;
  }

  .nav-global * {
    -webkit-text-size-adjust: 100%;

    font-family: 'Heebo', -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    font-variation-settings: 'wght' 400;
    font-weight: normal;
  }

  .nav-global {
    background-color: var(--nav-global-color-bg);
    color: var(--nav-global-color-text);
    display: flex;
    position: relative;
    z-index: var(--zindex-fixed);
  }

  .nav-global h3,
  .nav-global h4,
  .nav-global strong {
    font-variation-settings: 'wght' 500;
  }

  .nav-global figure,
  .nav-global section {
    display: block;
  }

  .nav-global svg:not(:root) {
    overflow: hidden;
    vertical-align: middle;
  }

  .nav-global .nav-global-container {
    flex: 1;
    margin: 0 auto;
  }

  /* Navigation. */
  .nav-global nav {
    align-items: center;
    display: flex;
    line-height: var(--nav-global-font-size);
    font-size: var(--nav-global-font-size);
    height: var(--nav-global-navbar-height);
    margin: 0 auto;
    padding: 0 var(--nav-global-spacer);
    position: relative;
  }

  /* Links. */
  .nav-global a:not(.dropdown-item) {
    color: inherit;
    cursor: pointer;
    text-decoration: none;
    transition: background-color var(--nav-global-transition-speed) ease-out, color var(--nav-global-transition-speed) ease-out;
  }

  .nav-global a:not(.dropdown-item):hover {
    color: var(--nav-global-color-text-hover);
  }

  /* Navigation items. */
  .nav-global nav > ul {
    list-style: none;
    margin: 0;
    padding: 0;
  }

  .nav-global nav > ul,
  .nav-global nav > ul > li,
  .nav-global nav > ul > li > a,
  .nav-global-apps-dropdown-container {
    align-items: center;
    display: inline-flex;
    height: 100%;
  }

  .nav-global-apps-dropdown-container {
    position: relative;
  }

  .nav-global nav > ul > li > a {
    padding: var(--nav-global-link-padding-y) var(--nav-global-link-padding-x);
  }

  .nav-global nav > a.is-active,
  .nav-global nav > a.is-active svg,
  .nav-global nav > ul > li > a.is-active,
  .nav-global .nav-global-link-active,
  .nav-global .nav-global-link-active svg {
    color: var(--nav-global-color-text-active) !important;
    fill: var(--nav-global-color-text-active);
    font-variation-settings: 'wght' 500;
  }

  .nav-global .nav-global-links-right {
    margin-left: auto;
  }

  /* Logo. */
  .nav-global a.nav-global-logo {
    margin-right: var(--nav-global-spacer);
    position: relative;
    top: 2px;
  }

  .nav-global a.nav-global-logo strong {
    margin-inline: var(--nav-global-spacer-sm);
    font-size: 18px;
  }

  .nav-global .nav-global-logo svg {
    height: 21px;
  }

  .nav-global a.nav-global-logo svg {
    position: relative;
    top: -4px;
  }

  .nav-global svg {
    fill: var(--nav-global-color-text);
    transition: fill var(--nav-global-transition-speed) ease-out;
  }

  .nav-global .nav-global-logo:hover svg {
    fill: white;
  }

  /* Apps button. */
  .nav-global button,
  .nav-global .nav-global-btn {
    -webkit-appearance: button;

    align-items: center;
    background-color: transparent;
    border-radius: var(--nav-global-border-radius);
    border: 0;
    color: var(--nav-global-color-button-text);
    cursor: pointer;
    display: inline-flex;
    font: inherit;
    height: var(--nav-global-button-height);
    margin: 0;
    outline: 0;
    overflow: visible;
    padding: var(--nav-global-spacer-xs) var(--nav-global-spacer);
    text-transform: none;
    transition: background-color var(--nav-global-transition-speed) ease-out, color var(--nav-global-transition-speed) ease-out, transform var(--nav-global-transition-speed) ease-out;
    white-space: nowrap;
  }

  .nav-global button span,
  .nav-global .nav-global-btn span {
    white-space: nowrap;
  }

  .nav-global button:hover,
  .nav-global .nav-global-btn:hover {
    background-color: var(--nav-global-color-button-bg-hover);
    color: var(--nav-global-color-text-hover);
    cursor: pointer;
  }

  .nav-global button.nav-global-btn-active,
  .nav-global .nav-global-btn.nav-global-btn-active {
    background-color: var(--nav-global-color-primary-bg);
    color: var(--nav-global-color-primary);
  }

  .nav-global button.nav-global-btn-active svg,
  .nav-global .nav-global-btn.nav-global-btn-active svg {
    fill: var(--nav-global-color-primary);
  }

  .nav-global .nav-global-icon {
    height: 20px;
    pointer-events: none;
    width: 20px;
  }

  .nav-global-icon-dropdown-toggle {
    margin-left: var(--nav-global-spacer-xs);
  }

  .nav-global button:hover svg,
  .nav-global .nav-global-btn:hover svg {
    fill: white;
  }

  /* Apps dropdown menu. */
  .nav-global .nav-global-apps-menu {
    background-color: var(--nav-global-color-menu-bg);
    border-radius: var(--nav-global-border-radius-lg);
    border: thin solid var(--nav-global-color-menu-border);
    box-shadow: var(--nav-global-box-shadow-menu);
    display: none;
    padding: var(--nav-global-spacer-sm);
    position: absolute;
    right: 0;
    top: calc(100% + 15px);
    visibility: hidden;
    width: 640px;
    z-index: var(--nav-global-color-menu-zindex);
  }

  .nav-global .nav-global-dropdown.is-visible {
    display: block;
    visibility: visible;
  }

  /* Tiny triangle in the corner. */
  .nav-global .nav-global-apps-menu::before {
    background-color: var(--nav-global-color-menu-bg);
    border-radius: 3px;
    border: 2px var(--nav-global-color-menu-bg) solid;
    content: '';
    display: block;
    height: .85rem;
    position: absolute;
    right: .85rem;
    top: -0.25rem;
    transform: rotate(45deg);
    width: 1rem;
    z-index: -1;
  }

  .nav-global .nav-global-apps-menu ul {
    border-bottom: 2px solid rgba(255, 255, 255, .05);
    display: grid;
    gap: var(--nav-global-spacer-sm);
    grid-template-columns: repeat(2, 1fr);
    list-style: none;
    margin: 0 0 var(--nav-global-spacer-xs) 0;
    padding: var(--nav-global-spacer-xs) 0 var(--nav-global-spacer-sm) 0;
  }

  .nav-global .nav-global-apps-menu ul>li>a {
    border-radius: var(--nav-global-border-radius-lg);
    display: flex;
    flex: 1;
    height: 100%;
  }

  .nav-global .nav-global-apps-menu ul>li>a:hover {
    background-color: rgba(255, 255, 255, .05);
    color: var(--nav-global-color-text-active);
    box-shadow: var(--nav-global-box-shadow-menu-item);
  }

  .nav-global .nav-global-apps-menu ul>li>a:hover h4,
  .nav-global .nav-global-apps-menu ul>li>a:hover svg {
    color: var(--nav-global-color-primary);
    fill: var(--nav-global-color-primary);
  }

  .nav-global .nav-global-apps-menu h3 {
    color: white;
    display: inline-block;
    font-size: 13px;
    line-height: 18px;
    margin: 0;
    opacity: .3;
    padding-left: var(--nav-global-spacer);
  }

  .nav-global .nav-global-apps-menu h4 {
    color: var(--nav-global-color-text-highlight);
    font-size: 17px;
    line-height: 18px;
    margin: var(--nav-global-spacer-xs) 0 0;
    padding: var(--nav-global-spacer-sm) var(--nav-global-spacer) 0;
    transition: color var(--nav-global-transition-speed) ease-out;
  }

  .nav-global .nav-global-apps-menu p {
    font-size: 15px;
    line-height: 20px;
    margin: 0;
    opacity: .8;
    padding: var(--nav-global-spacer-xs) var(--nav-global-spacer) var(--nav-global-spacer-sm);
  }

  .nav-global .nav-global-apps-menu figure {
    margin: var(--nav-global-spacer) 0 0 var(--nav-global-spacer);
  }

  .nav-global .nav-global-apps-menu ul>li>a svg {
    position: relative;
    top: -2px;
  }

  /* Donate section of the menu. */
  .nav-global .nav-global-apps-menu-section-donate ul {
    border: none;
    margin-bottom: 0;
    padding-bottom: 0;
  }

  .nav-global .nav-global-apps-menu-section-donate a svg {
    fill: hsl(352, 90%, 62%) !important;
    transition: transform var(--nav-global-transition-speed) ease-out;
  }

  .nav-global .nav-global-apps-menu-section-donate ul>li:first-child>a {
    background-color: hsla(352deg, 90%, 42%, .2);
  }

  .nav-global .nav-global-apps-menu-section-donate ul>li:first-child>a:hover {
    background-color: hsla(352deg, 90%, 42%, .5);
  }

  .nav-global .nav-global-apps-menu-section-donate ul>li:first-child>a:hover svg {
    fill: hsl(352, 90%, 72%) !important;
    transform: scale(1.2);
  }

  .nav-global .nav-global-apps-menu-section-donate ul>li:first-child>a:hover h4 {
    color: white;
  }

/* Mobile. */
.nav-global button.nav-global-logo {
  display: none;
  visibility: hidden;
}

@media (max-width: 767px) {

  .nav-global-apps-dropdown-container,
  .nav-global a.nav-global-logo {
    display: none;
  }

  .nav-global button.nav-global-logo {
    display: block;
    visibility: visible;
  }

  .nav-global .nav-global-nav-links {
    align-items: flex-start;
    background-color: var(--nav-global-color-menu-bg);
    border-radius: var(--nav-global-border-radius-lg);
    display: none;
    flex-direction: column;
    left: 1rem;
    padding: 0 var(--nav-global-spacer-sm);
    position: absolute;
    top: calc(100% + .5rem);
    visibility: visible;
    width: 10rem;
    z-index: var(--nav-global-color-menu-zindex);
  }

  .nav-global .nav-global-nav-links.is-visible {
    display: flex;
  }

  .nav-global .nav-global-nav-links::before {
    background-color: var(--nav-global-color-menu-bg);
    border-radius: 3px;
    border: 2px var(--nav-global-color-menu-bg) solid;
    content: '';
    display: block;
    height: 0.8rem;
    position: absolute;
    left: 1.5rem;
    top: -0.133rem;
    transform: rotate(45deg);
    width: 1rem;
    z-index: -1;
  }

  .nav-global nav>ul {
    height: initial;
  }

  .nav-global .nav-global-nav-links>li {
    border-bottom: 2px solid rgba(255, 255, 255, .05);
    width: 100%;
  }

  .nav-global .nav-global-nav-links>li:last-child {
    border: none;
  }

  .nav-global .nav-global-nav-links>li>a {
    padding-inline: 0;
    width: 100%;
  }
}
</style>

<style>
  /* Custom styling for code.blender.org */
  /* Make sure to start every line with ".nav-global"
   * so changes affect the developer navbar only. */

  /* Limit navbar width on large screens. */
  @media (min-width: 1200px) {
    .nav-global .nav-global-container {
      max-width: 1170px;
    }
  }
</style>

<div class="nav-global">
  <div class="nav-global-container">
    <nav>
      <a href="https://developer.blender.org/" class="nav-global-logo">
        <svg fill-rule="nonzero" viewBox="0 0 200 162.05">
          <path
            d="M61.1 104.56c.05 2.6.88 7.66 2.12 11.61a61.27 61.27 0 0 0 13.24 22.92 68.39 68.39 0 0 0 23.17 16.64 74.46 74.46 0 0 0 30.42 6.32 74.52 74.52 0 0 0 30.4-6.42 68.87 68.87 0 0 0 23.15-16.7 61.79 61.79 0 0 0 13.23-22.97 58.06 58.06 0 0 0 2.07-25.55 59.18 59.18 0 0 0-8.44-23.1 64.45 64.45 0 0 0-15.4-16.98h.02L112.76 2.46l-.16-.12c-4.09-3.14-10.96-3.13-15.46.02-4.55 3.18-5.07 8.44-1.02 11.75l-.02.02 26 21.14-79.23.08h-.1c-6.55.01-12.85 4.3-14.1 9.74-1.27 5.53 3.17 10.11 9.98 10.14v.02l40.15-.07-71.66 55-.27.2c-6.76 5.18-8.94 13.78-4.69 19.23 4.32 5.54 13.51 5.55 20.34.03l39.1-32s-.56 4.32-.52 6.91zm100.49 14.47c-8.06 8.2-19.34 12.86-31.54 12.89-12.23.02-23.5-4.6-31.57-12.79-3.93-4-6.83-8.59-8.61-13.48a35.57 35.57 0 0 1 2.34-29.25 39.1 39.1 0 0 1 9.58-11.4 44.68 44.68 0 0 1 28.24-9.85 44.59 44.59 0 0 1 28.24 9.77 38.94 38.94 0 0 1 9.58 11.36 35.58 35.58 0 0 1 4.33 14.18 35.1 35.1 0 0 1-1.98 15.05 37.7 37.7 0 0 1-8.61 13.52zm-57.6-27.91a23.55 23.55 0 0 1 8.55-16.68 28.45 28.45 0 0 1 18.39-6.57 28.5 28.5 0 0 1 18.38 6.57 23.57 23.57 0 0 1 8.55 16.67c.37 6.83-2.37 13.19-7.2 17.9a28.18 28.18 0 0 1-19.73 7.79c-7.83 0-14.84-3-19.75-7.8a23.13 23.13 0 0 1-7.19-17.88z" />
          <strong>Developer</strong>
        </svg>
      </a>

      <button class="nav-global-logo js-dropdown-toggle" data-toggle-menu-id="nav-global-nav-links">
        <svg fill-rule="nonzero" viewBox="0 0 850.2 162.05">
          <path d="M61.1 104.56c.05 2.6.88 7.66 2.12 11.61a61.27 61.27 0 0 0 13.24 22.92 68.39 68.39 0 0 0 23.17 16.64 74.46 74.46 0 0 0 30.42 6.32 74.52 74.52 0 0 0 30.4-6.42 68.87 68.87 0 0 0 23.15-16.7 61.79 61.79 0 0 0 13.23-22.97 58.06 58.06 0 0 0 2.07-25.55 59.18 59.18 0 0 0-8.44-23.1 64.45 64.45 0 0 0-15.4-16.98h.02L112.76 2.46l-.16-.12c-4.09-3.14-10.96-3.13-15.46.02-4.55 3.18-5.07 8.44-1.02 11.75l-.02.02 26 21.14-79.23.08h-.1c-6.55.01-12.85 4.3-14.1 9.74-1.27 5.53 3.17 10.11 9.98 10.14v.02l40.15-.07-71.66 55-.27.2c-6.76 5.18-8.94 13.78-4.69 19.23 4.32 5.54 13.51 5.55 20.34.03l39.1-32s-.56 4.32-.52 6.91zm100.49 14.47c-8.06 8.2-19.34 12.86-31.54 12.89-12.23.02-23.5-4.6-31.57-12.79-3.93-4-6.83-8.59-8.61-13.48a35.57 35.57 0 0 1 2.34-29.25 39.1 39.1 0 0 1 9.58-11.4 44.68 44.68 0 0 1 28.24-9.85 44.59 44.59 0 0 1 28.24 9.77 38.94 38.94 0 0 1 9.58 11.36 35.58 35.58 0 0 1 4.33 14.18 35.1 35.1 0 0 1-1.98 15.05 37.7 37.7 0 0 1-8.61 13.52zm-57.6-27.91a23.55 23.55 0 0 1 8.55-16.68 28.45 28.45 0 0 1 18.39-6.57 28.5 28.5 0 0 1 18.38 6.57 23.57 23.57 0 0 1 8.55 16.67c.37 6.83-2.37 13.19-7.2 17.9a28.18 28.18 0 0 1-19.73 7.79c-7.83 0-14.84-3-19.75-7.8a23.13 23.13 0 0 1-7.19-17.88z" />
          <path d="M829.17 133.76h-15.9V64.39h15.13l.77 13.59zM850.07 79q-1.47-.25-3.14-.38-1.6-.13-3.2-.13-5.26 0-8.8 1.92-3.45 1.86-5.25 5.39-1.8 3.46-2.11 8.2l-3.66.07q0-8.78 2.31-15.77 2.3-6.99 6.92-11.1 4.62-4.1 11.54-4.1 1.35 0 3.02.26 1.66.26 2.5.58zm-76.55 56.04q-10.32 0-17.82-4.42-7.5-4.5-11.55-12.06-4.03-7.63-4.03-17.05v-2.63q0-10.84 4.1-18.85 4.1-8.08 11.22-12.5 7.18-4.43 16.22-4.43 10 0 16.6 4.36 6.6 4.3 9.88 12 3.27 7.62 3.27 17.69V104h-53.67V92.53h37.96v-1.22q-.13-4.04-1.54-7.56-1.4-3.53-4.49-5.7-3.01-2.19-8.07-2.19-5.07 0-8.53 2.89-3.46 2.82-5.26 8.01-1.8 5.13-1.8 12.12v2.63q0 5.9 2.19 10.58 2.18 4.68 6.34 7.43 4.17 2.7 9.94 2.7 5.58 0 9.87-2.18 4.36-2.18 7.5-6.29l8.34 8.34q-3.27 4.93-9.87 8.97-6.54 3.98-16.8 3.98zm-88.67 25.39h-15.9V64.39h14.68l1.22 13.33zm45-60.72q0 10.13-3.13 18.15-3.08 7.95-9.1 12.56-5.97 4.62-14.63 4.62-8.72 0-14.49-4.23-5.7-4.3-8.9-11.8-3.21-7.5-4.43-17.12v-4.55q1.22-10.26 4.42-17.89 3.2-7.7 8.91-11.99 5.71-4.36 14.3-4.36 8.79 0 14.81 4.43 6.03 4.42 9.1 12.37 3.15 7.95 3.15 18.47zm-15.9-1.34q0-6.22-1.6-11.29-1.53-5.06-5-8.01-3.4-2.95-8.9-2.95-3.98 0-6.87 1.35-2.88 1.28-4.87 3.65-1.92 2.37-3.01 5.64-1.1 3.2-1.54 7.05v11.6q.77 4.62 2.56 8.47 1.8 3.85 5.13 6.16 3.4 2.24 8.72 2.24 5.51 0 8.91-3.08 3.4-3.14 4.94-8.2 1.54-5.13 1.54-11.29zm-122.51.06q0-10.13 3.84-18.08 3.85-7.95 11.03-12.57 7.25-4.68 17.38-4.68 10.25 0 17.5 4.68 7.24 4.62 11.03 12.57 3.84 7.95 3.84 18.08v1.35q0 10.06-3.84 18.08-3.79 7.95-11.03 12.56-7.18 4.62-17.38 4.62-10.19 0-17.43-4.62-7.25-4.61-11.1-12.56-3.84-8.02-3.84-18.08zm15.9 1.35q0 6.15 1.73 11.28 1.73 5.07 5.32 8.14 3.65 3.08 9.42 3.08 5.71 0 9.3-3.08 3.65-3.07 5.32-8.14 1.73-5.13 1.73-11.28v-1.35q0-6.09-1.73-11.22-1.67-5.13-5.32-8.2-3.65-3.15-9.42-3.15-5.71 0-9.36 3.14-3.6 3.08-5.33 8.21-1.66 5.13-1.66 11.22zm-29.69 33.98h-15.9V35.28h15.9zm-56.67 1.28q-10.33 0-17.83-4.42-7.5-4.5-11.54-12.06-4.04-7.63-4.04-17.05v-2.63q0-10.84 4.1-18.85 4.11-8.08 11.23-12.5 7.18-4.43 16.22-4.43 10 0 16.6 4.36 6.6 4.3 9.88 12 3.27 7.62 3.27 17.69V104H495.2V92.53h37.96v-1.22q-.13-4.04-1.54-7.56-1.41-3.53-4.49-5.7-3.01-2.19-8.08-2.19-5.06 0-8.52 2.89-3.47 2.82-5.26 8.01-1.8 5.13-1.8 12.12v2.63q0 5.9 2.18 10.58t6.35 7.43q4.17 2.7 9.94 2.7 5.58 0 9.87-2.18 4.36-2.18 7.5-6.29l8.34 8.34q-3.27 4.93-9.88 8.97-6.54 3.98-16.8 3.98zM464.3 64.39h16.48l-23.98 69.37h-10.26l1.03-12.57zm-12.25 57 .77 12.37h-10.19l-24.17-69.37H435zm-65.88 13.65q-10.32 0-17.82-4.42-7.5-4.5-11.54-12.06-4.04-7.63-4.04-17.05v-2.63q0-10.84 4.1-18.85 4.1-8.08 11.22-12.5 7.18-4.43 16.22-4.43 10 0 16.6 4.36 6.61 4.3 9.88 12 3.27 7.62 3.27 17.69V104H360.4V92.53h37.95v-1.22q-.12-4.04-1.53-7.56-1.42-3.53-4.5-5.7-3-2.19-8.07-2.19t-8.53 2.89q-3.46 2.82-5.26 8.01-1.8 5.13-1.8 12.12v2.63q0 5.9 2.19 10.58 2.18 4.68 6.35 7.43 4.16 2.7 9.93 2.7 5.58 0 9.88-2.18 4.36-2.18 7.5-6.29l8.33 8.34q-3.27 4.93-9.87 8.97-6.54 3.98-16.8 3.98zm-107.64-1.28.12-13.27h19.75q8.6 0 14.36-3.72 5.77-3.72 8.72-10.65 2.95-6.98 2.95-16.67v-4.87q0-9.94-2.95-16.8-2.88-6.86-8.59-10.45-5.7-3.59-13.91-3.59h-20.84V40.41h20.84q12.5 0 21.93 5.51 9.48 5.52 14.8 15.45 5.33 9.94 5.33 23.34v4.74q0 13.47-5.32 23.4-5.33 9.94-14.94 15.46-9.56 5.45-22.38 5.45zm9.23 0h-16.54V40.4h16.54z" />
        </svg>
        <svg class="nav-global-icon nav-global-icon-dropdown-toggle" height="100px" width="100px" viewBox="0 0 1000 1000">
          <path d="m 206.53824,376.41174 a 42,42 0 0 1 71,-29 l 221,220 220,-220 a 42,42 0 1 1 59,59 l -250,250 a 42,42 0 0 1 -59,0 l -250,-250 a 42,42 0 0 1 -12,-30 z"/>
        </svg>
      </button>

      <ul class="nav-global-nav-links nav-global-dropdown js-dropdown-menu" id="nav-global-nav-links">
        <li>
          <a href="https://projects.blender.org">Projects</a>
        </li>
        <li>
          <a href="https://wiki.blender.org" class="nav-global-link-active">Docs</a>
        </li>
        <li>
          <a href="https://code.blender.org">Blog</a>
        </li>
        <li>
          <a href="https://devtalk.blender.org">Forum</a>
        </li>
        <li>
          <a href="https://builder.blender.org">Builds</a>
        </li>
      </ul>

      <ul class="nav-global-links-right">
        <li>
          <div class="nav-global-apps-dropdown-container">
            <button class="js-dropdown-toggle" data-toggle-menu-id="nav-global-apps-menu">
              <svg class="nav-global-icon" height="100px" width="100px" viewBox="0 0 1000 1000">
                <path
                  d="m 150.5,899 a 50,50 0 0 1 -49,-50 V 749 a 50,50 0 0 1 49,-50 h 100 a 50,50 0 0 1 50,50 v 100 a 50,50 0 0 1 -50,50 z m 299,0 a 50,50 0 0 1 -50,-50 V 749 a 50,50 0 0 1 50,-50 h 100 a 50,50 0 0 1 50,50 v 100 a 50,50 0 0 1 -50,50 z m 299,0 a 50,50 0 0 1 -50,-50 V 749 a 50,50 0 0 1 50,-50 h 100 a 50,50 0 0 1 50,50 v 100 a 50,50 0 0 1 -50,50 z m -598,-299 a 50,50 0 0 1 -49,-50 V 450 a 50,50 0 0 1 49,-50 h 100 a 50,50 0 0 1 50,50 v 100 a 50,50 0 0 1 -50,50 z m 299,0 a 50,50 0 0 1 -50,-50 V 450 a 50,50 0 0 1 50,-50 h 100 a 50,50 0 0 1 50,50 v 100 a 50,50 0 0 1 -50,50 z m 299,0 a 50,50 0 0 1 -50,-50 V 450 a 50,50 0 0 1 50,-50 h 100 a 50,50 0 0 1 50,50 v 100 a 50,50 0 0 1 -50,50 z m -598,-299 a 50,50 0 0 1 -49,-50 V 151 a 50,50 0 0 1 49,-50 h 100 a 50,50 0 0 1 50,50 v 100 a 50,50 0 0 1 -50,50 z m 299,0 a 50,50 0 0 1 -50,-50 V 151 a 50,50 0 0 1 50,-50 h 100 a 50,50 0 0 1 50,50 v 100 a 50,50 0 0 1 -50,50 z m 299,0 a 50,50 0 0 1 -50,-50 V 151 a 50,50 0 0 1 50,-50 h 100 a 50,50 0 0 1 50,50 v 100 a 50,50 0 0 1 -50,50 z"/>
              </svg>
            </button>

            <div class="nav-global-apps-menu nav-global-dropdown js-dropdown-menu" id="nav-global-apps-menu">
              <h3>BLENDER.ORG</h3>
              <ul>
                <li>
                  <a href="https://www.blender.org/download/" target="_blank">
                    <figure>
                      <svg class="nav-global-icon" height="100px" width="100px" viewBox="0 0 1000 1000">
                        <path
                          d="m 49.15424,599.52895 a 50.360431,50.360431 0 0 0 -49.16137168,50.36043 v 200.24266 c 0,81.53594 68.34629768,149.88226 149.88223168,149.88226 h 700.2498 c 81.53593,0 149.8822,-68.34632 149.8822,-149.88226 V 649.88938 a 50.360431,50.360431 0 1 0 -100.72083,0 v 200.24266 c 0,27.57834 -21.58304,49.16138 -49.16137,49.16138 H 149.8751 c -27.57833,0 -49.16137,-21.58304 -49.16137,-49.16138 V 649.88938 A 50.360431,50.360431 0 0 0 49.15424,599.52895 Z M 249.3969,350.12491 a 50.360431,50.360431 0 0 0 -34.77267,85.13311 l 250.60309,249.40404 a 50.360431,50.360431 0 0 0 70.74442,0 L 785.37577,435.25802 A 50.360431,50.360431 0 1 0 714.63136,364.51361 L 500,579.14497 285.36864,364.51361 A 50.360431,50.360431 0 0 0 249.3969,350.12491 Z M 498.80094,0 A 50.360431,50.360431 0 0 0 449.63957,50.360432 V 649.88938 a 50.360431,50.360431 0 1 0 100.72086,0 V 50.360432 A 50.360431,50.360431 0 0 0 498.80094,0 Z"
                          style="stroke-width:1.19906" />
                      </svg>
                    </figure>
                    <div>
                      <h4>Download</h4>
                      <p>Get the latest Blender, older versions, or experimental builds.</p>
                    </div>
                  </a>
                </li>
                <li>
                  <a href="https://www.blender.org/download/releases/" target="_blank">
                    <div>
                      <h4>What's New</h4>
                      <p>Stay up-to-date with the new features in the latest Blender releases.</p>
                    </div>
                  </a>
                </li>
              </ul>

              <h3>RESOURCES</h3>
              <ul>
                <li>
                  <a href="https://studio.blender.org/" target="_blank">
                    <figure>
                      <svg class="nav-global-icon" height="100px" width="100px" viewBox="0 0 1000 1000">
                        <path
                          d="m 146.70939,1.6802353 c -78.362959,0 -143.678322,64.2057377 -143.6783209,143.6570547 -7.2533835,268.45385 0,463.93349 0,709.63356 0,79.45132 65.3153619,143.65705 143.6783209,143.65705 266.17757,0.51388 460.32009,0 709.61228,0 79.45134,0 143.67832,-64.20573 143.67832,-143.65705 0.37471,-118.45983 0,-235.03162 0,-353.72203 0.017,-0.72264 0.017,-1.4456 0,-2.16825 0.43351,-118.60776 0,-235.80643 0,-353.74328 0,-79.451317 -64.22698,-143.6570547 -143.67832,-143.6570547 -241.21275,-1.18614431 -498.91438,-0.041532 -709.61228,0 z m 0,90.3436617 h 82.71228 V 228.07083 H 93.374735 v -82.73354 c 0,-30.47448 22.860165,-53.313393 53.334655,-53.313393 z m 173.05594,0 h 363.5004 c -5.81542,127.740813 0,236.658243 0,362.416273 h -363.5004 c 0.39671,-121.62159 0,-241.06277 0,-362.416273 z m 453.84406,0 h 82.71228 c 30.4745,0 53.33466,22.838913 53.33466,53.313393 v 82.73354 H 773.60939 Z M 93.374735,318.39324 H 229.42167 V 454.44017 H 93.374735 Z m 680.234655,0 H 909.65633 V 454.44017 H 773.60939 Z M 93.374735,545.86796 H 229.42167 V 681.91489 H 93.374735 Z m 226.390595,0 h 363.5004 c -5.81534,127.74773 0,236.67164 0,362.43753 h -363.5004 c 0.3967,-121.62867 0,-241.07685 0,-362.43753 z m 453.84406,0 H 909.65633 V 681.91489 H 773.60939 Z M 93.374735,772.25856 H 229.42167 v 136.04693 h -82.71228 c -30.47449,0 -53.334655,-22.86016 -53.334655,-53.33464 z m 680.234655,0 h 136.04694 v 82.71229 c 0,30.47448 -22.86016,53.33464 -53.33466,53.33464 h -82.71228 z"
                          style="stroke-width:1.08838" />
                      </svg>
                    </figure>
                    <div>
                      <h4>Blender Studio</h4>
                      <p>Access production assets and knowledge from the open movies.</p>
                    </div>
                  </a>
                </li>
                <li>
                  <a href="https://docs.blender.org/manual/en/latest/" target="_blank">
                    <div>
                      <h4>Manual</h4>
                      <p>Documentation on the usage and features in Blender.</p>
                    </div>
                  </a>
                </li>
              </ul>

              <h3>DEVELOPMENT</h3>
              <ul>
                <li>
                  <a href="https://code.blender.org/" target="_blank">
                    <figure>
                      <svg class="nav-global-icon" height="100px" width="100px" viewBox="0 0 1000 1000">
                        <path
                          d="m 683.36434,818.19976 a 45.841084,45.841084 0 0 1 -33.83509,-13.09745 45.841084,45.841084 0 0 1 0,-64.39581 L 890.74067,499.49508 649.52925,259.37512 a 45.841084,45.841084 0 0 1 0,-64.39582 45.841084,45.841084 0 0 1 64.39581,0 l 272.8636,272.8636 a 45.841084,45.841084 0 0 1 0,64.39581 l -272.8636,272.8636 a 45.841084,45.841084 0 0 1 -30.56072,13.09745 z m -363.45431,0 A 45.841084,45.841084 0 0 1 286.07494,805.10231 L 13.211339,532.23871 a 45.841084,45.841084 0 0 1 0,-64.39581 L 286.07494,194.9793 a 45.841084,45.841084 0 0 1 64.39581,0 45.841084,45.841084 0 0 1 0,64.39582 L 109.25933,499.49508 350.47075,740.7065 a 45.841084,45.841084 0 0 1 0,64.39581 45.841084,45.841084 0 0 1 -30.56072,13.09745 z"
                          style="stroke-width:1.09145" />
                      </svg>
                    </figure>
                    <div>
                      <h4>Developers Blog</h4>
                      <p>Latest development updates, by Blender developers.</p>
                    </div>
                  </a>
                </li>
                <li>
                  <a href="https://wiki.blender.org/" target="_blank">
                    <div>
                      <h4>Documentation</h4>
                      <p>Guidelines, release notes and development docs.</p>
                    </div>
                  </a>
                </li>
              </ul>

              <ul>
                <li>
                  <a href="https://opendata.blender.org/" target="_blank">
                    <figure>
                      <svg class="nav-global-icon" height="100px" width="100px" viewBox="0 0 1000 1000">
                        <path
                          d="M 499.99424,0 A 55.30474,55.30474 0 0 0 444.6895,55.30474 V 944.69526 A 55.30474,55.30474 0 0 0 499.99424,1000 55.30474,55.30474 0 0 0 555.29898,944.69526 V 55.30474 A 55.30474,55.30474 0 0 0 499.99424,0 Z m 332.95711,332.95711 a 55.30474,55.30474 0 0 0 -55.30474,56.43341 V 944.69526 A 55.30474,55.30474 0 0 0 832.95135,1000 55.30474,55.30474 0 0 0 888.25609,944.69526 V 389.39052 A 55.30474,55.30474 0 0 0 832.95135,332.95711 Z M 167.03713,555.30474 a 55.30474,55.30474 0 0 0 -55.30474,55.30474 V 944.69526 A 55.30474,55.30474 0 0 0 167.03713,1000 55.30474,55.30474 0 0 0 222.34187,944.69526 V 610.60948 a 55.30474,55.30474 0 0 0 -55.30474,-55.30474 z"
                          style="stroke-width:1.12867" />
                      </svg>
                    </figure>
                    <div>
                      <h4>Benchmark</h4>
                      <p>A platform to collect and share results of the Blender Benchmark.</p>
                    </div>
                  </a>
                </li>
                <li>
                  <a href="https://conference.blender.org/" target="_blank">
                    <div>
                      <h4>Blender Conference</h4>
                      <p>The yearly event that brings the community together.</p>
                    </div>
                  </a>
                </li>
              </ul>

              <div class="nav-global-apps-menu-section-donate">
                <h3>DONATE</h3>
                <ul>
                  <li>
                    <a href="https://fund.blender.org/" target="_blank">
                      <figure>
                        <svg class="nav-global-icon" height="100px" width="100px" viewBox="0 0 1000 1000">
                          <path
                            d="M 273.67169,58.416076 C 201.59785,62.59427 135.79129,94.975269 86.697523,145.11359 37.603742,194.20736 4.1781939,260.01391 0,332.08775 -4.1781926,403.11704 22.980065,480.41362 86.697523,545.17562 l 45.960127,45.96013 339.47823,338.43367 a 43.871033,43.871033 0 0 0 61.62835,0 L 872.1979,591.13575 918.15804,545.17562 c 109.67766,-110.72213 109.67766,-290.38445 0,-400.06203 -110.72213,-110.722127 -290.38445,-110.722127 -400.06204,0 l -15.66822,14.62368 -15.66822,-14.62368 C 423.04211,80.351592 345.74553,53.193334 273.67169,58.416076 Z m 5.22274,86.697514 c 48.04922,-3.13365 98.18754,12.53458 146.23677,60.5838 l 47.00468,47.00468 a 43.871033,43.871033 0 0 0 61.62835,0 l 45.96013,-47.00468 c 76.25204,-76.25203 199.50874,-76.25203 276.80532,0 77.29658,77.29658 77.29658,200.5533 0,277.84988 L 810.56956,529.50739 502.42778,837.64917 194.286,529.50739 148.32588,483.54727 C 100.27665,434.45349 84.608431,384.31516 86.697523,336.26594 c 3.133646,-47.00467 26.113717,-95.0539 61.628357,-130.56855 35.51464,-35.51464 82.51932,-58.49471 130.56855,-60.5838 z"
                            style="stroke-width:1.04455" />
                        </svg>
                      </figure>
                      <div>
                        <h4>Development Fund</h4>
                        <p>Support core development with a monthly contribution.</p>
                      </div>
                    </a>
                  </li>
                  <li>
                    <a href="https://www.blender.org/about/donations/" target="_blank">
                      <div>
                        <h4>One-time Donations</h4>
                        <p>Perform a single donation with more payment options available.</p>
                      </div>
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </li>
      </ul>
    </nav>
  </div>
</div>

<script>
  const dropdownToggles = document.getElementsByClassName("js-dropdown-toggle");
  const btnActiveClass = 'nav-global-btn-active';
  const isVisibleClass = 'is-visible';

  /* Hide all dropdowns. */
  function dropdownHideAll() {
    const dropdownMenus = document.getElementsByClassName("js-dropdown-menu");

    if (dropdownMenus) {
      for (let i = 0; i < dropdownMenus.length; i++) {
        dropdownMenus[i].classList.remove(isVisibleClass);
      }
    }

    /* Remove styling from all dropdown toggles. */
    for (let i = 0; i < dropdownToggles.length; i++) {
      dropdownToggles[i].classList.remove(btnActiveClass);
    }
  }

  for (let i = 0; i < dropdownToggles.length; i++) {
    dropdownToggles[i].addEventListener("click", function (e) {
      e.stopPropagation();

      const dropdownId = this.getAttribute('data-toggle-menu-id');
      const el = document.getElementById(dropdownId);

      if (el) {
        /* If the button is already active, remove styling. */
        if (el.classList.contains(isVisibleClass)) {
          dropdownHideAll();
        } else {
          /* Style button as active and show menu. */
          this.classList.add(btnActiveClass);
          el.classList.add(isVisibleClass);
        }
      }
    });
  }

  /* Hide all dropdowns when clicking anywhere except menus. */
  document.body.addEventListener("click", function (e) {
    if (!e.target.classList.contains("js-dropdown-menu")) {
      dropdownHideAll();
    }
  });

  /* Hide all dropdowns when pressing Esc. */
  window.addEventListener('keydown', function (event) {
    if (event.key === 'Escape') {
      dropdownHideAll();
    }
  });
</script>

		<nav class="navbar navbar-expand flex-column flex-md-row bd-navbar">
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>

			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav mr-auto">
					<li class="nav-item"><a class="nav-link" href="https://wiki.blender.org/">Developer Documentation</a></li>
				</ul>
				<div>
<ul class="navbar-nav"><li id="ca-view" class="nav-item"><a href="Experiments.html" redundant="1" class="nav-link">View</a></li><li id="ca-viewsource" class="nav-item"><a href="https://wiki.blender.org/w/index.php?title=User:Jon_Denning/Reports/2022/Experiments&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e" class="nav-link">View source</a></li><li id="ca-history" class="nav-item"><a href="https://wiki.blender.org/w/index.php?title=User:Jon_Denning/Reports/2022/Experiments&amp;action=history" title="Past revisions of this page [h]" accesskey="h" class="nav-link">History</a></li><li class="nav-item"><li class="nav-item dropdown" id="p-personal"><a class="nav-link dropdown-toggle" role="button" data-toggle="dropdown">Personal tools</a><div class="dropdown-menu dropdown-menu-right"><span id="pt-login"><a href="https://wiki.blender.org/w/index.php?title=Special:UserLogin&amp;returnto=User%3AJon+Denning%2FReports%2F2022%2FExperiments" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o" class="dropdown-item">Log in</a></span></div></li></li></ul>				</div>
			</div>
		</nav>



		<div id="mw-wrapper" class="container-fluid">
			<div class="row flex-xl-nowrap">
				<div class="col-12 col-md-3 col-xl-2 bd-sidebar">
					<form action="https://wiki.blender.org/w/index.php" role="search" class="bd-search d-flex align-items-center" id="p-search"><input type="hidden" value="Special:Search" name="title"/><input type="search" name="search" placeholder="Search..." title="Search Blender Developer Wiki [f]" accesskey="f" id="searchInput" class="form-control ds-input" autocomplete="off"/></form>										<div id="p-Building_Blender">
						<h5>Building Blender</h5>
						 <!-- If you do not want the words "Navigation" or "Tools" to appear, you can safely remove the line above. -->

											<ul>
					<li id="n-Windows"><a href="../../../Building_Blender/Windows.html">Windows</a></li><li id="n-macOS"><a href="../../../Building_Blender/Mac.html">macOS</a></li><li id="n-Linux"><a href="../../../Building_Blender/Linux.html">Linux</a></li>						</ul>
										</div>
										<div id="p-Develop">
						<h5>Develop</h5>
						 <!-- If you do not want the words "Navigation" or "Tools" to appear, you can safely remove the line above. -->

											<ul>
					<li id="n-Getting-Started"><a href="../../../Developer_Intro.html">Getting Started</a></li><li id="n-Code-Documentation"><a href="../../../Source.html">Code Documentation</a></li><li id="n-Style-Guide"><a href="../../../Style_Guide.html">Style Guide</a></li><li id="n-Release-Notes"><a href="../../../Reference/Release_Notes.html">Release Notes</a></li>						</ul>
										</div>
										<div id="p-Process">
						<h5>Process</h5>
						 <!-- If you do not want the words "Navigation" or "Tools" to appear, you can safely remove the line above. -->

											<ul>
					<li id="n-Communication"><a href="../../../Contact.html">Communication</a></li><li id="n-Modules"><a href="../../../Modules.html">Modules</a></li><li id="n-Bug-Tracker"><a href="../../../Process/Bug_Reports.html">Bug Tracker</a></li><li id="n-Code-Review"><a href="../../../Process/Contributing_Code.html">Code Review</a></li>						</ul>
										</div>
										<div id="p-More">
						<h5>More</h5>
						 <!-- If you do not want the words "Navigation" or "Tools" to appear, you can safely remove the line above. -->

											<ul>
					<li id="n-Google-Summer-of-Code"><a href="../../../GSoC.html">Google Summer of Code</a></li><li id="n-Python"><a href="../../../Special:RandomRootpage.html">Python</a></li><li id="n-FAQ"><a href="../../../FAQ.html">FAQ</a></li>						</ul>
										</div>
									</div>

								<div class="d-none d-xl-block col-xl-2 bd-toc">
					<div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Experiments.html#Useful_Notes"><span class="tocnumber">1</span> <span class="toctext">Useful Notes</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="Experiments.html#Detecting_when_bpy.context.active_object_changes"><span class="tocnumber">1.1</span> <span class="toctext">Detecting when bpy.context.active_object changes</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="Experiments.html#Gizmo_Matrices"><span class="tocnumber">1.2</span> <span class="toctext">Gizmo Matrices</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="Experiments.html#Detecting_Changes_Made_Outside_Operator"><span class="tocnumber">1.3</span> <span class="toctext">Detecting Changes Made Outside Operator</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="Experiments.html#Detecting_When_Tool_Becomes_.28Un.29Selected"><span class="tocnumber">1.4</span> <span class="toctext">Detecting When Tool Becomes (Un)Selected</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="Experiments.html#Call_Flows"><span class="tocnumber">1.5</span> <span class="toctext">Call Flows</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="Experiments.html#Operator"><span class="tocnumber">1.5.1</span> <span class="toctext">Operator</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="Experiments.html#Macro"><span class="tocnumber">1.5.2</span> <span class="toctext">Macro</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="Experiments.html#Questions"><span class="tocnumber">2</span> <span class="toctext">Questions</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="Experiments.html#Retopo_Translate"><span class="tocnumber">3</span> <span class="toctext">Retopo Translate</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="Experiments.html#Create_a_New_Scene_with_Correct_Snapping_Settings"><span class="tocnumber">3.1</span> <span class="toctext">Create a New Scene with Correct Snapping Settings</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="Experiments.html#Just_Set_It_and_Forget_It"><span class="tocnumber">3.2</span> <span class="toctext">Just Set It and Forget It</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="Experiments.html#Macro_2"><span class="tocnumber">3.3</span> <span class="toctext">Macro</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="Experiments.html#Temporary_Set"><span class="tocnumber">3.4</span> <span class="toctext">Temporary Set</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="Experiments.html#Wrap_in_Another_Modal_Operator"><span class="tocnumber">3.5</span> <span class="toctext">Wrap in Another Modal Operator</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="Experiments.html#A_bpy.context.temp_override_tool_settings_Method"><span class="tocnumber">3.6</span> <span class="toctext">A bpy.context.temp_override_tool_settings Method</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="Experiments.html#Add_Additional_Snapping_Arguments"><span class="tocnumber">3.7</span> <span class="toctext">Add Additional Snapping Arguments</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-18"><a href="Experiments.html#GeoPen_Tool"><span class="tocnumber">4</span> <span class="toctext">GeoPen Tool</span></a>
<ul>
<li class="toclevel-2 tocsection-19"><a href="Experiments.html#modal_operators"><span class="tocnumber">4.1</span> <span class="toctext">modal operators</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="Experiments.html#geopen_hiccups"><span class="tocnumber">4.2</span> <span class="toctext">geopen hiccups</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-21"><a href="Experiments.html#Gizmos_and_WorkSpaceTools"><span class="tocnumber">5</span> <span class="toctext">Gizmos and WorkSpaceTools</span></a>
<ul>
<li class="toclevel-2 tocsection-22"><a href="Experiments.html#Gizmos"><span class="tocnumber">5.1</span> <span class="toctext">Gizmos</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="Experiments.html#GizmoGroup"><span class="tocnumber">5.2</span> <span class="toctext">GizmoGroup</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="Experiments.html#Gizmo"><span class="tocnumber">5.3</span> <span class="toctext">Gizmo</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="Experiments.html#WorkSpaceTool"><span class="tocnumber">5.4</span> <span class="toctext">WorkSpaceTool</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="Experiments.html#GizmoProperties_and_GizmoGroupProperties"><span class="tocnumber">5.5</span> <span class="toctext">GizmoProperties and GizmoGroupProperties</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-27"><a href="Experiments.html#To_Do"><span class="tocnumber">6</span> <span class="toctext">To Do</span></a></li>
</ul>
</div>				</div>
				
								<div class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 bd-content" role="main">
					<div class="mw-indicators mw-body-content">
</div>
<h1 class="firstHeading">User:Jon Denning/Reports/2022/Experiments</h1>
					<div class="mw-body-content">
						<div id="contentSub"><p><span class="subpages">&lt; <a href="../../../User:Jon_Denning.html" title="User:Jon Denning">User:Jon Denning</a>&lrm; | <a href="../../Reports.html" title="User:Jon Denning/Reports">Reports</a>&lrm; | <a href="../2022.html" title="User:Jon Denning/Reports/2022">2022</a></span></p><p></p></div><div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><p>The following is a very quick and dirty write up of an experiment I ran.
</p><p>notes:
</p>
<ul><li>some of the findings from this experiment will go toward creating new retopo tools.</li>
<li>i worked on some utility code to help facilitate quick implementation.  some of these are seen in the code snippets below. this code will be posted soon</li>
<li>my primary focus is to create retopo operators, gizmos, etc.  secondarily, i want to find the shortcomings, hidden gotchas, missing docs, etc. for doing this type of work.</li></ul>
<p><br />
</p>


<h1><span class="mw-headline" id="Useful_Notes">Useful Notes</span></h1>
<h2><span class="mw-headline" id="Detecting_when_bpy.context.active_object_changes">Detecting when <code>bpy.context.active_object</code> changes</span></h2>
<p>this was posted by @GaiaClary to #python <a rel="nofollow" class="external text" href="https://blender.chat/channel/python?msg=G4Cn57s5XWmq3k8AP">link</a>
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="n">key</span><span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">LayerObjects</span><span class="p">,</span> <span class="s2">&quot;active&quot;</span><span class="p">;</span>
<span class="n">owner</span> <span class="o">=</span> <span class="n">Object</span><span class="p">()</span>
<span class="n">bpy</span><span class="o">.</span><span class="n">msgbus</span><span class="o">.</span><span class="n">subscribe_rna</span><span class="p">(</span>
  <span class="n">key</span><span class="o">=</span> <span class="n">key</span><span class="p">,</span>
  <span class="n">owner</span><span class="o">=</span><span class="n">owner</span><span class="p">,</span>
  <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">),</span>
  <span class="n">notify</span><span class="o">=</span><span class="n">notification_handler</span><span class="p">,</span>
  <span class="n">options</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;PERSISTENT&quot;</span><span class="p">,}</span>
<span class="p">)</span>
</pre></div>
<h2><span class="mw-headline" id="Gizmo_Matrices"><code>Gizmo</code> Matrices</span></h2>
<p>a <code>Gizmo</code> object has several matrices that are used for positioning it for drawing, but the <a rel="nofollow" class="external text" href="https://docs.blender.org/api/current/bpy.types.Gizmo.html#bpy.types.Gizmo.matrix_basis">docs</a> <a rel="nofollow" class="external text" href="https://docs.blender.org/api/current/bpy.types.Gizmo.html#bpy.types.Gizmo.matrix_offset">are</a> <a rel="nofollow" class="external text" href="https://docs.blender.org/api/current/bpy.types.Gizmo.html#bpy.types.Gizmo.matrix_space">not</a> <a rel="nofollow" class="external text" href="https://docs.blender.org/api/current/bpy.types.Gizmo.html#bpy.types.Gizmo.matrix_world">clear</a> on how they're combined to form the final matrix.  digging through the source, here is what i've found:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span><span class="p">(</span><span class="n">no_scale</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">final</span> <span class="o">=</span> <span class="n">space</span> <span class="o">*</span> <span class="n">basis</span> <span class="o">*</span> <span class="n">offset</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// note: scale is a float that is treated as a 3x3 scaling matrix</span>
    <span class="n">scale3x3</span> <span class="o">=</span> <span class="p">[</span> <span class="n">scale</span> <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>
                 <span class="mi">0</span>     <span class="n">scale</span> <span class="mi">0</span>     <span class="mi">0</span>
                 <span class="mi">0</span>     <span class="mi">0</span>     <span class="n">scale</span> <span class="mi">0</span>
                 <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">1</span> <span class="p">]</span>
    <span class="k">if</span><span class="p">(</span><span class="n">offset_scale</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">final</span> <span class="o">=</span> <span class="n">space</span> <span class="o">*</span> <span class="n">basis</span> <span class="o">*</span> <span class="n">scale3x3</span> <span class="o">*</span> <span class="n">offset</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">final</span> <span class="o">=</span> <span class="n">space</span> <span class="o">*</span> <span class="n">basis</span>            <span class="o">*</span> <span class="n">offset</span> <span class="o">*</span> <span class="n">scale3x3</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p><br />
</p>
<h2><span class="mw-headline" id="Detecting_Changes_Made_Outside_Operator">Detecting Changes Made Outside Operator</span></h2>
<p>use <code>bpy.app.handlers.depsgraph_update_post</code> to register callbacks that can detect if some mesh data has changed.  ex: if <code>depsgraph.id_type_updated("MESH")</code> returns <code>True</code>, then a mesh has been updated.  it's still very crude, as cannot tell how the mesh was altered or even which mesh was changed, but it could be useful.
</p>
<ul><li>changing <code>co</code> and <code>select</code> of vertex in Python does cause depsgraph to update</li>
<li>note: changing <code>normal</code> of vertex does <b>NOT</b> trigger a depsgraph update.  i wonder what all else does or does not.  <i>should</i> changing vertex normal cause depsgraph update?  also, ops to flip normals and recalculate normal do not trigger depsgraph update.</li></ul>
<p>if operator makes changes to mesh, a simple deterministic is to set a flag (ex: <code>IJustMadeAChange</code>) when operator makes a change, then reset it every frame.  in the depsgraph callback, check the flag to see if the change was due to our operator or something else.  another approach is in the <code>handler</code> method of <code>SnapWidgetCommon</code> class in <code>scripts/addons/mesh_snap_utilities_line/widgets.py</code>.  in there, a test checks the name of the last operator performed (i.e., <code>last_operator = context.window_manager.operators[-1]</code>) against the set of our operator names.
</p>
<h2><span id="Detecting_When_Tool_Becomes_(Un)Selected"></span><span class="mw-headline" id="Detecting_When_Tool_Becomes_.28Un.29Selected">Detecting When Tool Becomes (Un)Selected</span></h2>
<p>there seems to be no standard way to know when a tool becomes selected or unselected (without active polling).
</p><p>one way by aburdin (<a rel="nofollow" class="external text" href="https://blender.stackexchange.com/a/158853">stack exchange answer</a>) is to add a NOP <code>GizmoGroup</code> to the <code>WorkSpaceTool</code>, since <code>GizmoGroup</code> objects know when they are selected.  below is a copy-paste from the stack exchange answer.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">MYADDONNAME_TOOL_mytool</span><span class="p">(</span><span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">WorkSpaceTool</span><span class="p">):</span>
    <span class="n">bl_idname</span> <span class="o">=</span> <span class="s2">&quot;myaddonname.mytool&quot;</span>
    <span class="n">bl_space_type</span><span class="o">=</span><span class="s1">&#39;VIEW_3D&#39;</span>
    <span class="n">bl_context_mode</span><span class="o">=</span><span class="s1">&#39;OBJECT&#39;</span>
    <span class="n">bl_label</span> <span class="o">=</span> <span class="s2">&quot;My tool&quot;</span>
    <span class="n">bl_icon</span> <span class="o">=</span> <span class="s2">&quot;ops.transform.vertex_random&quot;</span>
    <span class="n">bl_widget</span> <span class="o">=</span> <span class="s2">&quot;MYADDONNAME_GGT_mytool_activated&quot;</span>

<span class="k">class</span> <span class="nc">MYADDONNAME_GGT_mytool_activated</span><span class="p">(</span><span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">GizmoGroup</span><span class="p">):</span>
    <span class="n">bl_label</span> <span class="o">=</span> <span class="s2">&quot;(internal)&quot;</span>
    <span class="n">bl_space_type</span> <span class="o">=</span> <span class="s1">&#39;VIEW_3D&#39;</span>
    <span class="n">bl_region_type</span> <span class="o">=</span> <span class="s1">&#39;WINDOW&#39;</span>
    <span class="n">bl_options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;3D&#39;</span><span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">poll</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;My tool activated!&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;My tool deactivated!&quot;</span><span class="p">)</span>

<span class="n">bpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">register_class</span><span class="p">(</span><span class="n">MYADDONNAME_GGT_mytool_activated</span><span class="p">)</span>
<span class="n">bpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">register_tool</span><span class="p">(</span><span class="n">MYADDONNAME_TOOL_mytool</span><span class="p">,</span> <span class="n">separator</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
<h2><span class="mw-headline" id="Call_Flows">Call Flows</span></h2>
<p>documentation and examples around Operators, Macros, Gizmos, etc. do not explain well the order of method / function calls.  below are my attempts at diagramming the call flow.
</p><p>note: i have not spent much time tweaking layout, readability, etc.  these digraphs are generated directly from an online graphviz editor, <a rel="nofollow" class="external text" href="https://edotor.net?engine=dot">Edotor</a>.  the original source behind graphs are embedded in the image link.
</p><p><br />
</p>
<h3><span class="mw-headline" id="Operator">Operator</span></h3>
<p>Below is a rough call-flow diagram of some of the functions around <code>Operator</code>.  click the image to see the original source behind the diagram and to inspect the diagram better.
</p>
<div class="center"><div class="floatnone"><a href="https://edotor.net/?engine=dot?engine=dot#digraph%20%7B%0A%20%20%20%20graph%20%5B%0A%20%20%20%20%20%20%20%20label%3D%22Call-flow%20diagram%20of%20Operator.%5CnNote%3A%20the%20arrows%20indicate%20order%20of%20function%20calling%2C%20not%20direct%20calling%20of%20functions%22%0A%20%20%20%20%20%20%20%20splines%3Dtrue%0A%20%20%20%20%20%20%20%20nodesep%3D0.5%0A%20%20%20%20%20%20%20%20ranksep%3D0.5%0A%20%20%20%20%5D%0A%20%20%20%20node%20%5Bshape%3Dbox%5D%0A%0A%20%20%20%20%23%20To%20refactor%20nodes%2C%20place%20the%20cursor%20left%20to%20a%20node%20name%0A%20%20%20%20frame%20%5Blabel%3D%22Blender%20Frame%20%2F%20Event%22%5D%0A%20%20%20%20runningmodal%20%5Blabel%3D%22Modal%20Operator%5CnRunning%3F%22%20shape%3Ddiamond%5D%0A%20%20%20%20gettop%20%5Blabel%3D%22On%20top%5Cnmodal%20operator...%22%5D%0A%20%20%20%20getnext%20%5Blabel%3D%22On%20next%5Cnmodal%20operator...%22%5D%0A%20%20%20%20blenderhandle%20%5Blabel%3D%22Blender%20handles%5Cnevent%22%5D%0A%20%20%20%20foreachop%20%5Blabel%3D%22For%20each%5Cnoperator%2C%20if...%22%20shape%3Ddiamond%5D%0A%0A%20%20%20%20subgraph%20cluster_3%20%7B%0A%20%20%20%20%20%20%20%20label%3D%22initialize%20operators%22%0A%0A%20%20%20%20%20%20%20%20setup%20%5Blabel%3D%22Set%20Up%20Operator%22%5D%0A%20%20%20%20%7D%0A%0A%20%20%20%20subgraph%20cluster_2%20%7B%0A%20%20%20%20%20%20%20%20label%3D%22no%20modal%20operator%22%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20poll%20%5Blabel%3D%22%40classmethod%5Cnpoll(cls%2C%20context)%22%5D%0A%20%20%20%20%20%20%20%20ignore%20%5Blabel%3D%22ignoring%22%20shape%3Dnote%5D%0A%20%20%20%20%20%20%20%20init%20%5Blabel%3D%22__init__(self)%22%5D%0A%20%20%20%20%20%20%20%20callordraw%20%5Blabel%3D%22Drawing%20or%5CnCalling%3F%22%20shape%3Ddiamond%5D%0A%20%20%20%20%20%20%20%20draw%20%5Blabel%3D%22draw(self)%22%5D%0A%20%20%20%20%20%20%20%20invokeexec%20%5Blabel%3D%22Invoked%20or%5CnExecuted%3F%22%20shape%3Ddiamond%5D%0A%20%20%20%20%20%20%20%20invokeexists%20%5Blabel%3D%22invoke()%5Cnexists%3F%22%20shape%3Ddiamond%5D%0A%20%20%20%20%20%20%20%20invoke%20%5Blabel%3D%22invoke(self%2C%20context%2C%20event)%22%5D%0A%20%20%20%20%20%20%20%20execute%20%5Blabel%3D%22execute(self%2C%20context)%22%5D%0A%20%20%20%20%20%20%20%20handleret%20%5Blabel%3D%22Return%5CnValue%3F%22%20shape%3Ddiamond%5D%0A%20%20%20%20%20%20%20%20startmodal%20%5Blabel%3D%22done%20for%20now.%5Cnadded%20to%20modal%20stack%22%20shape%3Dnote%5D%0A%20%20%20%20%7D%0A%0A%20%20%20%20subgraph%20cluster_1%20%7B%0A%20%20%20%20%20%20%20%20label%3D%22running%20modal%20operator%22%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20modal%20%5Blabel%3D%22modal(self%2C%20context%2C%20event)%22%5D%0A%20%20%20%20%20%20%20%20handlemodalret%20%5Blabel%3D%22Return%5CnValue%3F%22%20shape%3Ddiamond%5D%0A%20%20%20%20%20%20%20%20continuemodal%20%5Blabel%3D%22done%20for%20now.%5Cncontinue%20modal%22%20shape%3Dnote%5D%0A%20%20%20%20%7D%0A%0A%20%20%20%20subgraph%20cluster_0%20%7B%0A%20%20%20%20%20%20%20%20label%3D%22finishing%20operator%5Cnnote%3A%20unclear%20call%20order%22%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20undopop%20%5Blabel%3D%22Undo%20entry%20popped%5Cn(if%20applicable)%22%5D%0A%20%20%20%20%20%20%20%20cancel%20%5Blabel%3D%22cancel(self%2C%20context)%22%5D%0A%20%20%20%20%20%20%20%20unmodal%20%5Blabel%3D%22Unregister%20as%20modal%20operator%5Cn(if%20applicable)%22%5D%0A%20%20%20%20%20%20%20%20del%20%5Blabel%3D%22__del__(self)%22%5D%0A%20%20%20%20%7D%0A%0A%20%20%20%20frame%20-%3E%20setup%20%5Blabel%3D%22register%22%5D%0A%20%20%20%20frame%20-%3E%20runningmodal%0A%20%20%20%20runningmodal%20-%3E%20foreachop%20%5Blabel%3D%22No%22%5D%0A%20%20%20%20runningmodal%20-%3E%20gettop%20%5Blabel%3D%22Yes%22%5D%0A%20%20%20%20gettop%20-%3E%20modal%0A%20%20%20%20foreachop%20-%3E%20foreachop%20%5Blabel%3D%22no%20match%22%5D%0A%20%20%20%20foreachop%20-%3E%20poll%20%5Blabel%3D%22options%20match%22%5D%0A%0A%20%20%20%20poll%20-%3E%20ignore%20%5Blabel%3D%22False%22%5D%0A%20%20%20%20poll%20-%3E%20init%20%5Blabel%3D%22True%22%5D%0A%20%20%20%20init%20-%3E%20callordraw%0A%20%20%20%20callordraw%20-%3E%20invokeexec%20%5Blabel%3D%22calling%22%5D%0A%20%20%20%20callordraw%20-%3E%20draw%20%5Blabel%3D%22drawing%22%5D%0A%20%20%20%20draw%20-%3E%20foreachop%20%5Bweight%3D0%5D%0A%20%20%20%20invokeexec%20-%3E%20invokeexists%20%5Blabel%3D%22Invoked%22%5D%0A%20%20%20%20invokeexec%20-%3E%20execute%20%5Blabel%3D%22Executed%22%5D%0A%20%20%20%20invokeexists%20-%3E%20invoke%20%5Blabel%3D%22Yes%22%5D%0A%20%20%20%20invokeexists%20-%3E%20execute%20%5Blabel%3D%22No%22%5D%0A%20%20%20%20ignore%20-%3E%20foreachop%20%5Bweight%3D0%5D%0A%20%20%20%20invoke%20-%3E%20handleret%0A%20%20%20%20execute%20-%3E%20handleret%0A%20%20%20%20handleret%20-%3E%20foreachop%20%5Blabel%3D%22PASS_THROUGH%22%20weight%3D0%5D%0A%20%20%20%20handleret%20-%3E%20cancel%20%5Blabel%3D%22CANCELLED%22%5D%0A%20%20%20%20handleret%20-%3E%20del%20%5Blabel%3D%22FINISHED%22%5D%0A%20%20%20%20handleret%20-%3E%20unclear%20%5Blabel%3D%22INTERFACE%22%5D%0A%20%20%20%20handleret%20-%3E%20unclear%20%5Blabel%3D%22RUNNING_MODAL%5Cnnot%20registered%22%5D%0A%20%20%20%20handleret%20-%3E%20startmodal%20%5Blabel%3D%22RUNNING_MODAL%5Cnregistered%20modal%22%5D%0A%0A%20%20%20%20modal%20-%3E%20handlemodalret%0A%20%20%20%20handlemodalret%20-%3E%20cancel%20%5Blabel%3D%22CANCELLED%22%5D%0A%20%20%20%20handlemodalret%20-%3E%20unmodal%20%5Blabel%3D%22FINISHED%22%5D%0A%20%20%20%20cancel%20-%3E%20undopop%20-%3E%20unmodal%0A%20%20%20%20unmodal%20-%3E%20del%0A%0A%20%20%20%20handlemodalret%20-%3E%20getnext%20%5Blabel%3D%22PASS_THROUGH%22%20weight%3D0%5D%0A%20%20%20%20handlemodalret%20-%3E%20continuemodal%20%5Blabel%3D%22RUNNING_MODAL%22%5D%0A%20%20%20%20getnext%20-%3E%20modal%20%5Blabel%3D%22if%20exists...%22%5D%0A%20%20%20%20getnext%20-%3E%20blenderhandle%20%5Blabel%3D%22none%20exists...%22%5D%0A%0A%20%20%20%20unclear%20%5Blabel%3D%22Docs%20are%5Cnunclear...%22%20shape%3Dnote%5D%0A%20%20%20%20handlemodalret%20-%3E%20unclear%20%5Blabel%3D%22INTERFACE%22%5D%0A%0A%20%20%20%20continuemodal%20-%3E%20cancel%20%5Bcolor%3Dtransparent%20comment%3D%22layout%20only%22%5D%0A%20%20%20%20del%20-%3E%20unclear%20%5Bcolor%3Dtransparent%20comment%3D%22layout%20only%22%5D%0A%7D%0A" title="Operator Call Flow" rel="nofollow"><img alt="&quot;click to view source&quot;" src="../../../../w/images/thumb/1/1d/Operator_Call_Flow.png/600px-Operator_Call_Flow.png" width="600" height="1162" style="vertical-align: middle" srcset="../../../../w/images/1/1d/Operator_Call_Flow.png 1.5x" /></a></div></div>
<p>The <a rel="nofollow" class="external text" href="https://docs.blender.org/api/current/bpy.types.Operator.html">docs</a> are not clear on...
</p>
<ul><li>what happens when <code>invoke</code> or <code>execute</code> return <code>{"RUNNING_MODAL"}</code> without registering the operator (ex: <code>context.window_manager.modal_handler_add(self)</code>).</li>
<li>what happens when <code>invoke</code> or <code>execute</code> return <code>{"PASS_THROUGH"}</code></li>
<li>how multiple modal operators running at the same time work (ex: what exactly happens if <code>modal</code> returns <code>{"PASS_THROUGH"}</code>)</li>
<li>what happens if one operator (modal or not) invokes/executes another operator (modal or not)</li>
<li>what happens if there are several operators are running modal, the top operator returns <code>RUNNING_MODAL</code>, and a lower operator returns <code>FINISHED</code>??</li>
<li>what happens if an operator returns a combination of return values in the set (ex: <code>{'PASS_THROUGH', 'FINISHED'}</code>)?</li></ul>
<p>Caveats:
</p>
<ul><li><code>poll</code> -&gt; <code>__init__</code> and calls to <code>__del__</code> are not quite correct.  <code>poll</code> determines if an operator is valid in context.  when Blender is drawing the UI, the UI code will specify to draw some operator.  Blender will need an instance of that operator in order to call <code>draw</code>, but not if calling <code>poll</code>.  if <code>poll</code> returns <code>True</code>, then Blender will call <code>draw</code> on operator.  these drawn operators "stick around", so that when they are interacted with later (ex: clicked), Blender can call either <code>invoke</code> or <code>execute</code>.  and this is especially important, because the code that drew the operator can set properties on the drawn operator that will affect the invoking or executing.  in the end, however, this diagram is good enough to understand the general call flow.  some unclear items:
<ul><li>when is an operator deleted (and <code>__del__</code> is called)?  ex: is the operator created every UI redraw?  if operator is part of menu, is it created when menu is opened and then deleted when menu is closed?</li>
<li>call order of <code>__init__</code> and <code>poll</code>?</li>
<li>call order of these methods when operator is executed from script / console (no drawing or invoking)?</li></ul></li>
<li>an operator is not removed from modal operator stack unless <code>modal</code> returns <code>{'FINISHED'}</code></li></ul>
<h3><span class="mw-headline" id="Macro">Macro</span></h3>
<ul><li>docs are not clear on how macros work with modal operators</li></ul>
<h1><span class="mw-headline" id="Questions">Questions</span></h1>
<ul><li>what is <code>GizmoGroup.mode</code>?  in <code>context_mode_check()</code> of <code>mesh_snap_utitilies_line/widgets.py</code>, there is a test of <code>tool.mode == context.mode</code>.  but as far as i can tell, <code>GizmoGroup.mode</code> can only be empty set or <code>{'DEFAULT'}</code>.  either way, i have no idea what's going on here.</li>
<li>what are <code>GizmoProperties</code> and <code>GizmoGroupProperties</code> used for?</li>
<li>why are there specialized collections (<code>Gizmos</code>, <code>BMVertSeq</code>, etc.) rather than using <code>bpy_prop_collection</code> (<a rel="nofollow" class="external text" href="https://docs.blender.org/api/current/bpy.types.bpy_prop_collection.html#bpy.types.bpy_prop_collection">link</a>)?</li>
<li>functions in <code>bmesh.ops</code> invalidate references?  (tried: <code>bmesh.ops.bisect_edges</code>)</li></ul>
<h1><span class="mw-headline" id="Retopo_Translate">Retopo Translate</span></h1>
<p>I tried to duplicate the <code>bpy.ops.transform.translate</code> operator but with specific snapping settings set. ideally, the adjustment of snapping settings are made only temporarily.  also, only absolutely necessary changes should be made to other Blender settings, scene, etc., if any at all are needed.  finally, the operator should act like any other built-in operator (able to cancel, no visible indication of or delay from switching operators, able to undo, does not push excessively to undo stack, etc.).
</p><p><br />
</p>
<h2><span class="mw-headline" id="Create_a_New_Scene_with_Correct_Snapping_Settings">Create a New Scene with Correct Snapping Settings</span></h2>
<p>as the <code>bpy.context.tool_settings</code> is based on the scene, we could create a linked scene with the correct settings, and then switch between them.
</p><p>not good.
</p><p><br />
</p>
<h2><span class="mw-headline" id="Just_Set_It_and_Forget_It">Just Set It and Forget It</span></h2>
<p>simply setting the snapping settings and then calling the operator works fairly well and requires very little code.  however, this blows away all of the previous snapping settings, which isn't ideal.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">Retopology_Snap_Translate_JustSet</span><span class="p">(</span><span class="n">Operator</span><span class="p">):</span>
    <span class="n">bl_idname</span> <span class="o">=</span> <span class="s1">&#39;retopology.snap_translate_justset&#39;</span>
    <span class="n">bl_label</span> <span class="o">=</span> <span class="s1">&#39;Translate with face project snapping (Just Set!)&#39;</span>
    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="n">ToolSettings</span><span class="o">.</span><span class="n">just_set</span><span class="p">(</span><span class="n">ToolSettings</span><span class="o">.</span><span class="n">project_face</span><span class="p">())</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="s1">&#39;INVOKE_DEFAULT&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;FINISHED&#39;</span><span class="p">}</span>
</pre></div>
<p><br />
</p>
<h2><span class="mw-headline" id="Macro_2">Macro</span></h2>
<p>using <code>bpy.types.Macro</code> and <code>Macro.define</code> to chain together multiple operators is very quick to do and requires very little code (ignoring the additional operators for setting and resetting snapping settings).  however, if one of the operators is cancelled, then there's no way reset the snapping settings.  also, adjusting the operator's parameters after leaving modal will reapply transformation without snapping. 
</p><p>(while this doesn't work too well for snapping the translation, i think it might work well enough for other retopo tools)
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">Retopology_Snap_Translate_Macro</span><span class="p">(</span><span class="n">Macro</span><span class="p">):</span>
    <span class="n">bl_idname</span> <span class="o">=</span> <span class="s1">&#39;retopology.snap_translate_macro&#39;</span>
    <span class="n">bl_label</span> <span class="o">=</span> <span class="s1">&#39;Translate with face project snapping (Macro)&#39;</span>
    <span class="n">bl_options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;REGISTER&#39;</span><span class="p">,</span> <span class="s1">&#39;UNDO&#39;</span><span class="p">,</span> <span class="s1">&#39;MACRO&#39;</span><span class="p">}</span>  <span class="c1"># not sure about needing &#39;MACRO&#39;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">registered</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">define</span><span class="p">(</span><span class="s1">&#39;RETOPOLOGY_OT_snap_faceproject&#39;</span><span class="p">)</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">define</span><span class="p">(</span><span class="s1">&#39;TRANSFORM_OT_translate&#39;</span><span class="p">)</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">define</span><span class="p">(</span><span class="s1">&#39;RETOPOLOGY_OT_snap_reset&#39;</span><span class="p">)</span>
</pre></div>
<p><br />
</p>
<h2><span class="mw-headline" id="Temporary_Set">Temporary Set</span></h2>
<p>another approach is to set directly the settings, then call the operator, then reset the settings after (ex: using <code>with</code>).  again, this doesn't allow for changing the operator parameters after leaving modal and still having the geometry snapped.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">Retopology_Snap_Translate_TempSet</span><span class="p">(</span><span class="n">Operator</span><span class="p">):</span>
    <span class="n">bl_idname</span> <span class="o">=</span> <span class="s1">&#39;retopology.snap_translate_quickchange&#39;</span>
    <span class="n">bl_label</span> <span class="o">=</span> <span class="s1">&#39;Translate with face project snapping (Temp Set)&#39;</span>
    <span class="k">def</span> <span class="nf">invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">snap_faceproject</span><span class="p">():</span>
            <span class="n">bpy</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="s1">&#39;INVOKE_DEFAULT&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;FINISHED&#39;</span><span class="p">}</span>
</pre></div>
<p><br />
</p>
<h2><span class="mw-headline" id="Wrap_in_Another_Modal_Operator">Wrap in Another Modal Operator</span></h2>
<p>one approach is to wrap the operator in another modal operator, where the snapping settings are set when started, the operator is called, then once the operator returns, reset the snapping settings in the modal callback.  this really is just a sloppier and hackier version of the temp set option above, with the same drawbacks plus a small stutter.  not good.
</p><p>note: i also experimented with using <code>_bpy.ops.call</code> to call the "operator" directly and tried to understand <code>bpy.ops.*</code> and <code>bpy.types.*</code> better.  I tried to see what it would take to extend some of the built-ins, but i didn't get too far.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># operator wrapping function / factory</span>
<span class="k">def</span> <span class="nf">create_retopology_operator</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">toolsettings_args</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">bl_description</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">bl_options</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">register</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="kn">from</span> <span class="nn">_bpy</span> <span class="kn">import</span> <span class="n">ops</span> <span class="k">as</span> <span class="n">_ops</span>

    <span class="n">op_category</span><span class="p">,</span> <span class="n">op_pyname</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_OT_&#39;</span><span class="p">)</span>
    <span class="n">op_category</span> <span class="o">=</span> <span class="n">op_category</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Retopology_Operator</span><span class="p">(</span><span class="n">Operator</span><span class="p">):</span>
        <span class="n">bl_idname</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;retopology.{op_category}_{op_pyname}&#39;</span>
        <span class="n">bl_label</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;Retopology {label}&#39;</span>
        <span class="c1">#bl_description = f&#39;{description}&#39;</span>
        <span class="n">bl_options</span> <span class="o">=</span> <span class="n">_ops</span><span class="o">.</span><span class="n">get_bl_options</span><span class="p">(</span><span class="n">op</span><span class="p">)</span>

        <span class="nd">@classmethod</span>
        <span class="k">def</span> <span class="nf">poll</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_ops</span><span class="o">.</span><span class="n">poll</span><span class="p">(</span><span class="n">op</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
            <span class="c1"># SET UP</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ts</span> <span class="o">=</span> <span class="n">ToolSettings</span><span class="p">(</span><span class="n">toolsettings_args</span><span class="p">)</span>

            <span class="c1"># call op</span>
            <span class="n">C_dict</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">C_exec</span> <span class="o">=</span> <span class="s1">&#39;INVOKE_DEFAULT&#39;</span>
            <span class="n">C_undo</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="n">_ops</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">C_dict</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">,</span> <span class="n">C_exec</span><span class="p">,</span> <span class="n">C_undo</span><span class="p">)</span>

            <span class="n">context</span><span class="o">.</span><span class="n">window_manager</span><span class="o">.</span><span class="n">modal_handler_add</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;RUNNING_MODAL&#39;</span><span class="p">}</span>

        <span class="k">def</span> <span class="nf">modal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
            <span class="c1"># TEAR DOWN</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ts</span><span class="o">.</span><span class="n">restore_all</span><span class="p">()</span>

            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;FINISHED&#39;</span><span class="p">}</span>

    <span class="n">Retopology_Operator</span><span class="o">.</span><span class="n">__qualname__</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;retopology.{op_category}.{op_pyname}&#39;</span>
    <span class="n">Retopology_Operator</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;retopology.{op_category}.{op_pyname}&#39;</span>
    <span class="c1">#Retopology_Operator.__doc__ = f&#39;Retopology. {op.__doc__}&#39;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">register</span><span class="p">:</span> <span class="k">return</span> <span class="n">Retopology_Operator</span>
    <span class="k">return</span> <span class="n">registerable</span><span class="p">(</span><span class="n">Retopology_Operator</span><span class="p">)</span>

<span class="n">create_retopology_operator</span><span class="p">(</span>
    <span class="s1">&#39;TRANSFORM_OT_translate&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Translate with face project snapping (Wrapper)&#39;</span><span class="p">,</span>
    <span class="n">ToolSettings</span><span class="o">.</span><span class="n">project_face</span><span class="p">(),</span>
    <span class="n">bl_description</span><span class="o">=</span><span class="s1">&#39;Translate with face project snapping (Wrapper)&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
<p><br />
</p>
<h2><span class="mw-headline" id="A_bpy.context.temp_override_tool_settings_Method">A <code>bpy.context.temp_override_tool_settings</code> Method</span></h2>
<p>I created a <code>temp_override_tool_settings</code> Context method that works similarly to the <code>temp_override</code> Context method  (note: <code>temp_override</code> does *not* work to temporarily override <code>tool_settings</code>, as it is not specially handled and temp_override does not recurse).  it allows the scene's tool settings to be stashed, overwritten, then restored.  i took a couple attempts at this.  while I think this work could be useful, I'm going to pause/abandon this work for now.  this approach does not allow for tool parameters to be modified after leaving modal with snapping.
</p><p><br />
</p>
<h2><span class="mw-headline" id="Add_Additional_Snapping_Arguments">Add Additional Snapping Arguments</span></h2>
<p>This version requires making changes to the C code.  in particular, adding extra params to the transform operator.  this option does everything I need it to do, except that snapping is enabled if <code>snap=True</code> is passed.  still working on finding a workaround for this.
</p><p>As far as duplicating the translate operator, this option is by far the best.  it doesn't push additional and unnecessary actions to undo stack.  it allows for adjustment of operator parameters after leaving modal mode.
</p><p>in my patch, I also exposed the snapping settings in the operator parameter panel.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="k">class</span> <span class="nc">Retopology_Snap_Translate_Args</span><span class="p">(</span><span class="n">Operator</span><span class="p">):</span>
    <span class="n">bl_idname</span> <span class="o">=</span> <span class="s1">&#39;retopology.snap_translate_args&#39;</span>
    <span class="n">bl_label</span> <span class="o">=</span> <span class="s1">&#39;Translate with face project snapping (Arguments)&#39;</span>
    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span>
            <span class="s1">&#39;INVOKE_DEFAULT&#39;</span><span class="p">,</span>
            <span class="n">snap</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
            <span class="n">snap_elements</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;FACE&#39;</span><span class="p">},</span>
            <span class="n">use_snap_project</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;FINISHED&#39;</span><span class="p">}</span>
</pre></div>
<p><br />
</p><p><br />
</p>
<h1><span class="mw-headline" id="GeoPen_Tool">GeoPen Tool</span></h1>
<p>Here are some notes from working on a basic geopen tool
</p>
<ul><li>When extending <code>bpy.types.Macro</code>, ...
<ul><li>any bug in <code>Operator</code> in the macro causes a crash, but the macro continues on calling the next operator.</li>
<li><strike>if any of the modal operators are cancelled, the macro stops execution</strike> not sure about this actually... see note on modal operators
<ul><li>it might be nice to have a callback for success and cancellation (similar to <a rel="nofollow" class="external text" href="https://docs.blender.org/api/current/bpy.types.Gizmo.html#bpy.types.Gizmo.exit">Gizmo().exit</a></li></ul></li></ul></li></ul>
<ul><li>BMesh issues
<ul><li>no method to select all / deselect all.  must loop through all geometry and set manually</li>
<li>no method for knowing how many or which verts / edges / faces are currently selected.  must loop through all geometry</li></ul></li></ul>
<ul><li>Face projection (original face snapping method):
<ul><li>Geometry that does not project to a face is simply translated (as if snapping is turned off).  how to handle this situation?
<ul><li>use face nearest as fallback?  does this make sense?  worth making this change regardless of using for handling this case?</li>
<li>modify face snapping to remember last successful snapping location, and use that if unable to project?  (could add option to enable this)</li>
<li>modify face snapping to remember last successful snapping location, and translate off that location (instead of original location) if unable to project?  this seems less useful</li></ul></li></ul></li></ul>
<ul><li>keymap
<ul><li>impossible to have create-new-geometry alongside select-geometry where both use LMB (for example). adding a keyboard modifier to create-new-geometry will bleed into and interfere with the translate followup modal operator.
<ul><li>possibly add additional args that cause translate to ignore modifiers???  if artist wants constraints or precision, they can switch to a translate tool for those options?</li></ul></li>
<li>forcing artists to switch tools or use shortcut to select geometry is non-ideal.</li></ul></li></ul>
<p><br />
</p>
<h2><span class="mw-headline" id="modal_operators">modal operators</span></h2>
<p>i tried creating a <code>Macro</code> that chained together an immediate operator (add new vertex), a modal operator (translate), and another immediate operator (select), but the final select operator was not getting called, but i'm not entirely sure why.  the reason for the need to chain is to that the tool always creates a new vertex, but that new vertex is bridged to existing geometry based on selection (selection is very obvious and clear, and it's exposed through UI already; as opposed to using a tag, property, or other marking; artist can quickly set up context).
</p><p>i <i>think</i> the reason for this behavior is that <code>Macro</code>s will blaze through the operators, and invoking a modal operator will call the <code>invoke</code> method right away, but <code>modal</code> will happen in next frame (lazy first call).
</p><p><br />
</p>
<h2><span class="mw-headline" id="geopen_hiccups">geopen hiccups</span></h2>
<p>as of 2022.05.23, I have a working prototype for geometry pen (<a rel="nofollow" class="external text" href="https://twitter.com/gfxcoder/status/1528730093299851265">tweet with video</a>), but there are several "hiccups" in the design.
</p>
<ul><li>the creation and translation of vertices both push to undo, which means that artists must undo twice.  it seems calling <code>bpy.ops.transform.translate('EXEC_DEFAULT', False, value=(0,0,0))</code> pushes to undo stack even though i've specified the <code>False</code> to prevent this.  I'll need to ask some questions on #blender-coders or dig in the source.</li></ul>
<ul><li>after selecting a vertex when nothing is selected, Blender does not register that the mouse cursor is now hovering a <code>Gizmo</code>.  the standard Move tool <i>does</i> work, but mine does not.</li></ul>
<ul><li>when Vertex and/or Edge snapping is enabled, the grabbed vertex will snap to vertices and/or edges of the source (edited) mesh (which is correct) and of the target (non-edited) mesh (which might not be correct).  presently, there is no way to have Vertex/Edge snapping work on source mesh while having Face Project snapping work on target.</li></ul>
<ul><li>knifing into existing geometry does work if auto merge / auto split are enabled, but only after committing to grab (does not merge/split with initial creation of vertex).  this is a decent behavior for most work, but there are times when it is cumbersome.  (perhaps an actual knife is appropriate)</li></ul>
<ul><li>presently, Blender's auto merge and auto split are combined as one property, <code>auto_merge_and_split</code>.</li></ul>
<ul><li>newly created vertices do not have a normal (actually, they have zero normal) if they aren't connected to a face.  should the face project snapping set their normal to be that of the normal of face at projection?  right now, i'm assuming that the normal should be pointing toward the view.  this assumption works well even if the artist is working on targets with inconsistent or inward pointing normals, but it doesn't work well if artist is working on the backside of the target.</li></ul>
<ul><li>there is no pre-viz of action right now, so the artist will know what will happen only after they take the first action.  i've experimented with hiding / showing individual <code>Gizmo</code> objects in a <code>GizmoGroup</code>, but more work needs to happen.  i do have concerns about performance... see next note</li></ul>
<ul><li>i'm iterating through <i>all</i> verts and edges of edit mesh to test for selection.  ideally, this would happen in C/C++ (new feature), or i could use the selection history (not sure this actually works).  as the target gets larger, this O(Nv + Ne) operation can impact performance.</li></ul>
<ul><li>geometry can be moved <i>off</i> the target.  this is non-ideal.  should probably make Face Nearest snapping be fall-back if the vert cannot project to a face.</li></ul>
<ul><li>there is no way to turn off/on snapping while in the middle of grab.</li></ul>
<ul><li>Vertex and Edge snapping only works correctly if there is one vertex grabbed.  if a grabbed edge is moved, then the source "target" is the only thing that is snapped, and only if the mouse cursor is hovering the vertex/edge.  an ideal snapping method would be to allow individual vertices to snap to nearby vertices.  an example of another ideal snapping method that presently isn't possible: if the grabbed edge is hovering another source edge, the verts of grabbed edge snap to the nearest verts of hovered edge, allowing for quickly merging two separated faces (as an example).</li></ul>
<ul><li>sometimes, vertex snapping does not work when working on vertices that are connected to the grabbed vertex via an edge or two.</li></ul>
<ul><li>right now, auto merging and splitting happens based on world-space distance.  this really should be screen-space distance instead. vertex and edge snapping is all done in screen space, so this disconnect could result in different behaviors (in screen-space the geo is too far apart to snap, but in world-space they are close enough to merge, so the geometry is surprisingly merged after releasing grab even though visually it wasn't snapped).</li></ul>
<ul><li>vertex and edge snapping distances are not exposed anywhere.</li></ul>
<h1><span class="mw-headline" id="Gizmos_and_WorkSpaceTools">Gizmos and WorkSpaceTools</span></h1>
<p>Currenly, there is no real documentation for the <code>Gizmo</code>, <code>Gizmos</code>, <code>GizmoGroup</code>, <code>GizmoProperties</code>, <code>GizmoGroupProperties</code>, and <code>WorkSpaceTool</code> classes.  There are a few small examples that come with Blender and some archived docs (<a rel="nofollow" class="external text" href="https://archive.blender.org/wiki/index.php/User:Julianeisel/Custom_Manipulators/">Custom Manipulators</a>), but none of these go into much detail.  I poked the #blender-coders channel, and Falk David (@filedescriptor), Jesse Y (@deadpin), and JulianEisel (@julianeisel) filled in some of the missing details.  I plan to write up a document with more extensive examples, but below are the highlights in a rough form.
</p>
<h2><span class="mw-headline" id="Gizmos"><code>Gizmos</code></span></h2>
<ul><li>used by <code>GizmoGroup</code> as a very simple collection of <code>Gizmo</code> objects.  this is similar to <code>BMesh</code> having a <code>BMVertSeq</code> containing a bunch of <code>BMVert</code> objects.</li>
<li>not really needed or used other than through <code>GizmoGroup().gizmos</code></li></ul>
<h2><span class="mw-headline" id="GizmoGroup"><code>GizmoGroup</code></span></h2>
<ul><li>a logical grouping of <code>Gizmo</code> objects ("all these <code>Gizmo</code> objects do / work on related things")</li>
<li>responsible for setting up each of the <code>Gizmo</code> objects</li>
<li>can be visualized / rendered:
<ul><li>at any point if not associated with a <code>WorkSpaceTool</code> (whenever its <code>poll</code> returns <code>True</code>).  if the <code>GizmoGroup</code> is not rendered, none of its <code>Gizmo</code> objects will be rendered.  individual <code>Gizmo</code> objects can opt to not render</li>
<li>(optionally) when an associated <code>WorkSpaceTool</code> is active.  effectively, the <code>WorkSpaceTool</code> wraps the <code>poll</code> method of <code>GizmoGroup</code>, returning <code>False</code> if associated <code>WorkSpaceTool</code> is not active.  If active, <code>poll</code> returns whatever the <code>GizmoGroup.poll</code> returns.</li></ul></li></ul>
<p><br />
</p>
<h2><span class="mw-headline" id="Gizmo"><code>Gizmo</code></span></h2>
<ul><li>can be thought of as a visualized, interactive version of <code>Operator</code> (calls other <code>Operator</code> objects or manipulates <code>Operator</code> parameters using <code>target_set_</code> methods.</li>
<li>a single instance of <code>Gizmo</code> can belong to exactly one <code>GizmoGroup</code>.  if 2+ <code>GizmoGroup</code> objects need a <code>Gizmo</code>, they each need to create their own instances of the <code>Gizmo</code>.</li>
<li>do not have a <code>poll</code> method, but visualization and interaction of <code>Gizmo</code> can be controlled by using the <code>hide</code> property or by performing NOP in the <code>draw</code> and <code>draw_select</code> methods.</li></ul>
<p><br />
</p>
<h2><span class="mw-headline" id="WorkSpaceTool"><code>WorkSpaceTool</code></span></h2>
<ul><li>the <code>widget</code> property should really be named <code>gizmogroupname</code> or something similar.  the "widget" term is an older term ("manipulator" is another).</li>
<li>a <code>WorkSpaceTool</code> can have exactly one <code>GizmoGroup</code> (set at start up)</li></ul>
<p><br />
</p>
<h2><span class="mw-headline" id="GizmoProperties_and_GizmoGroupProperties"><code>GizmoProperties</code> and <code>GizmoGroupProperties</code></span></h2>
<ul><li>similar to <code>Gizmos</code> class, just a collection of properties.</li>
<li>documentation is extremely limited here</li></ul>
<p><br />
</p>
<h1><span class="mw-headline" id="To_Do">To Do</span></h1>
<ul><li>rename "widget group" to "gizmo group" in <a rel="nofollow" class="external text" href="https://docs.blender.org/api/current/bpy.types.WindowManager.html#bpy.types.WindowManager.gizmo_group_type_ensure">WindowManager.gizmo_group_type_ensure</a> and <a rel="nofollow" class="external text" href="https://docs.blender.org/api/current/bpy.types.WindowManager.html#bpy.types.WindowManager.gizmo_group_type_unlink_delayed">WindowManager.gizmo_group_type_unlink_delayed</a></li>
<li>rename "widget" to "gizmo group name" in <a rel="nofollow" class="external text" href="https://docs.blender.org/api/current/bpy.types.WorkSpaceTool.html#bpy.types.WorkSpaceTool.widget">WorkSpaceTool.widget</a></li>
<li>rename <code>GizmoGroup</code> examples to use "GizmoGroup" instead of "WidgetGroup"</li>
<li>rename <code>Mesh.total_face_sel</code> to <code>Mesh.total_polygon_sel</code> (there are several uses of face)</li>
<li>check that <code>total_*_sel</code> is always correct (change selection w/o toggling edit mode) and update docs if not</li>
<li>add <code>use_snap_selectable</code> to <code>bpy.ops.transform.translate</code></li>
<li>make <code>snap</code> on <code>bpy.ops.transform.translate</code> not change tool settings!</li>
<li>add ability to snap to vertex of active/edit but not non-edit</li>
<li>add option for updating normal of snapped geometry</li>
<li>add screen-space auto merge option?</li>
<li>separate <code>auto_merge_and_split</code> arg for <code>bpy.ops.transform.translate</code> into <code>auto_merge</code> and <code>auto_split</code></li>
<li>polybuild bugs
<ul><li><code>Ctrl+LMB</code> does <i>not</i> respect snapping settings!</li>
<li><code>Ctrl</code> visualizations does <i>not</i> respect object's <code>matrix_world</code></li>
<li>holding <code>Cmd</code> does <i>not</i> have previz like holding <code>Ctrl</code></li></ul></li>
<li>calling with <code>bpy.ops.transform.translate</code> with <code>INVOKE_DEFAULT</code> will <i>ALWAYS</i> push to undo stack, even if <code>False</code> is passed to prevent undo push</li></ul>

<!-- 
NewPP limit report
Cached time: 20240111194706
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.101 seconds
Real time usage: 0.129 seconds
Preprocessor visited node count: 179/1000000
Preprocessor generated node count: 272/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 19311/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->
</div>
<!-- Saved in parser cache with key mw_wiki-mediawiki_:pcache:idhash:6343-0!canonical and timestamp 20240111194706 and revision id 31129
 -->
</div><div class="clearfix"></div><div class="printfooter">Retrieved from "<a dir="ltr" href="https://wiki.blender.org/w/index.php?title=User:Jon_Denning/Reports/2022/Experiments&amp;oldid=31129">https://wiki.blender.org/w/index.php?title=User:Jon_Denning/Reports/2022/Experiments&amp;oldid=31129</a>"</div>					</div>
				</div>
			</div>
		</div>

		<!-- Footer -->
		<footer class="footer pt-4">

			<!-- Footer Links -->
			<div class="container-fluid text-md-left">

				<!-- Grid row -->
				<div class="row">
					<div class="col-md-3 mt-md-0 mt-3"><h5 class="text-uppercase">info</h5><p id="footer-info-lastmod"> This page was last edited on 7 July 2022, at 20:28.</p><p id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</p></div><div class="col-md-3 mt-md-0 mt-3"><h5 class="text-uppercase">places</h5><ul id="footer-places" role="contentinfo"><li id="footer-places-privacy"><a href="https://wiki.blender.org/wiki/Blender_Developer_Wiki:Privacy_policy" title="Blender Developer Wiki:Privacy policy">Privacy policy</a></li><li id="footer-places-about"><a href="https://wiki.blender.org/wiki/Blender_Developer_Wiki:About" title="Blender Developer Wiki:About">About Blender Developer Wiki</a></li><li id="footer-places-disclaimer"><a href="https://wiki.blender.org/wiki/Blender_Developer_Wiki:General_disclaimer" title="Blender Developer Wiki:General disclaimer">Disclaimers</a></li></ul></div><div class="col-md-3 mt-md-0 mt-3"><h5 class="text-uppercase">Utilities</h5><ul id="p-tb"><li id="t-whatlinkshere"><a href="../../../Special:WhatLinksHere/User:Jon_Denning/Reports/2022/Experiments.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="https://wiki.blender.org/wiki/Special:RecentChangesLinked/User:Jon_Denning/Reports/2022/Experiments" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-contributions"><a href="../../../Special:Contributions/Jon_Denning.html" title="A list of contributions by this user">User contributions</a></li><li id="t-log"><a href="../../../Special:Log/Jon_Denning.html">Logs</a></li><li id="t-userrights"><a href="../../../Special:UserRights/Jon_Denning.html">View user groups</a></li><li id="t-specialpages"><a href="../../../Special:SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://wiki.blender.org/w/index.php?title=User:Jon_Denning/Reports/2022/Experiments&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://wiki.blender.org/w/index.php?title=User:Jon_Denning/Reports/2022/Experiments&amp;oldid=31129" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://wiki.blender.org/w/index.php?title=User:Jon_Denning/Reports/2022/Experiments&amp;action=info" title="More information about this page">Page information</a></li></ul></div><div class="col-md-3 mt-md-0 mt-3"><h5 class="text-uppercase">Navigation</h5><ul id="p-navigation"><li id="n-mainpage-description"><a href="../../../Main_Page.html" title="Visit the main page [z]" accesskey="z">Main page</a></li><li id="n-recentchanges"><a href="../../../Special:RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="../../../Special:Random.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li></ul></div>
				</div>
				<!-- Grid row -->

				<!-- Grid row -->
				<div class="row pt-4 pb-4">
					<div class="col">
						<!-- Copyright -->
						<div class="text-center">Creative freedom starts with Blender – The Free and Open Source 3D Creation Suite
						</div>
						<!-- Copyright -->
					</div>
				</div>
				<!-- Grid row -->

			</div>
			<!-- Footer Links -->
		</footer>
		<!-- Footer -->


		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.101","walltime":"0.129","ppvisitednodes":{"value":179,"limit":1000000},"ppgeneratednodes":{"value":272,"limit":1000000},"postexpandincludesize":{"value":0,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":19311,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"cachereport":{"timestamp":"20240111194706","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":39});});</script>		<script defer src="https://static.cloudflareinsights.com/beacon.min.js/v84a3a4012de94ce1a686ba8c167c359c1696973893317" integrity="sha512-euoFGowhlaLqXsPWQ48qSkBSCFs3DPRyiwVu3FjR96cMPx+Fr+gpWRhIafcHwqwCqWS42RZhIudOvEI+Ckf6MA==" data-cf-beacon='{"rayId":"844545c1eb040bae","b":1,"version":"2023.10.0","token":"d5f49e4e21684977a6be2ac49670f7b1"}' crossorigin="anonymous"></script>
</body>
		</html>

		