<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Source/VSE - Blender Developer Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Source/VSE","wgTitle":"Source/VSE","wgCurRevisionId":30043,"wgRevisionId":30043,"wgArticleId":6289,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Source/VSE","wgRelevantArticleId":6289,"wgRequestId":"b1a36662bc3f2ee96da32d1b","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","site":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","skins.bootstrap":"ready"});mw.loader.implement("user.tokens@1lo3932",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.bootstrap.js"]);});</script>
<link rel="stylesheet" href="../../w/load.php%3Fdebug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint,shared|mediawiki.sectionAnchor|skins.bootstrap&amp;only=styles&amp;skin=bootstrap.css"/>
<script async="" src="../../w/load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=bootstrap"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="../../w/load.php%3Fdebug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=bootstrap.css"/>
<meta name="generator" content="MediaWiki 1.31.10"/>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
<link rel="shortcut icon" href="../../favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://wiki.blender.org/w/opensearch_desc.php" title="Blender Developer Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.blender.org/w/api.php?action=rsd"/>
<link rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"/>
<link rel="alternate" type="application/atom+xml" title="Blender Developer Wiki Atom feed" href="https://wiki.blender.org/w/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<script defer data-domain="wiki.blender.org" src="https://analytics.blender.org/js/script.js"></script>
<!--[if lt IE 9]><script src="/w/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=bootstrap&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Source_VSE rootpage-Source skin-bootstrap action-view"><style>
   @font-face {
      font-family: "Heebo";
      src: url("https://www.blender.org/wp-content/themes/bthree/assets_shared/font/Heebo/Heebo-VariableFont_wght.ttf") format("truetype-variations");
      font-weight: normal;
      font-variation-settings: "wght" var(--font-weight);
      font-style: normal
    }
</style>

<style>
  /* This style block is copied across all sites using the developer navbar.
   * For custom styling on this website, add a <style> block after this one. */

  /* Variables. */
  .nav-global {
    -webkit-font-smoothing: antialiased;

    --nav-global-color-bg: hsl(213, 10%, 14%);
    --nav-global-color-text: hsl(213, 5%, 64%);
    --nav-global-color-text-secondary: hsl(213, 5%, 44%);
    --nav-global-color-text-highlight: hsl(213, 5%, 84%);
    --nav-global-color-text-hover: white;
    --nav-global-color-text-active: white;

    --nav-global-color-primary: hsl(204, 98%, 54%);
    --nav-global-color-primary-bg: hsla(204, 100%, 46%, .1);

    --nav-global-color-button-bg-hover: hsl(213, 10%, 24%);
    --nav-global-color-button-text: var(--nav-global-color-text);

    --nav-global-color-menu-bg: var(--nav-global-color-bg);
    --nav-global-color-menu-border: hsl(213, 10%, 18%);

    --nav-global-color-menu-zindex: 1040;

    --nav-global-box-shadow-menu: 0px 5px 15px -2px rgba(0, 0, 0, 0.33), 0px 5px 15px -5px rgba(0, 0, 0, 0.33);
    --nav-global-box-shadow-menu-item: 0px 1px 4px 0px rgba(0, 0, 0, 0.05), 0px 15px 20px -1px rgba(0, 0, 0, 0.025);

    --nav-global-navbar-height: var(--navbar-primary-height, 56px);

    --nav-global-spacer: 15px;
    --nav-global-spacer-sm: 10px;
    --nav-global-spacer-xs: 5px;

    --nav-global-border-radius: 6px;
    --nav-global-border-radius-lg: 10px;

    --nav-global-button-height: 35px;
    --nav-global-link-padding-x: var(--nav-global-spacer);
    --nav-global-link-padding-y: var(--nav-global-spacer-sm);

    --nav-global-font-size: 14px;
    --nav-global-transition-speed: 150ms;
  }

  /* Reset. */
  @namespace svg "http://www.w3.org/2000/svg";

  .nav-global :not(svg|*),
  .nav-global *::before,
  .nav-global *::after {
    -webkit-box-sizing: border-box;

    all: unset;
    display: revert;
    box-sizing: border-box;
  }

  .nav-global [default-styles] {
    all: revert;
  }

  .nav-global * {
    -webkit-text-size-adjust: 100%;

    font-family: 'Heebo', -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    font-variation-settings: 'wght' 400;
    font-weight: normal;
  }

  .nav-global {
    background-color: var(--nav-global-color-bg);
    color: var(--nav-global-color-text);
    display: flex;
    position: relative;
    z-index: var(--zindex-fixed);
  }

  .nav-global h3,
  .nav-global h4,
  .nav-global strong {
    font-variation-settings: 'wght' 500;
  }

  .nav-global figure,
  .nav-global section {
    display: block;
  }

  .nav-global svg:not(:root) {
    overflow: hidden;
    vertical-align: middle;
  }

  .nav-global .nav-global-container {
    flex: 1;
    margin: 0 auto;
  }

  /* Navigation. */
  .nav-global nav {
    align-items: center;
    display: flex;
    line-height: var(--nav-global-font-size);
    font-size: var(--nav-global-font-size);
    height: var(--nav-global-navbar-height);
    margin: 0 auto;
    padding: 0 var(--nav-global-spacer);
    position: relative;
  }

  /* Links. */
  .nav-global a:not(.dropdown-item) {
    color: inherit;
    cursor: pointer;
    text-decoration: none;
    transition: background-color var(--nav-global-transition-speed) ease-out, color var(--nav-global-transition-speed) ease-out;
  }

  .nav-global a:not(.dropdown-item):hover {
    color: var(--nav-global-color-text-hover);
  }

  /* Navigation items. */
  .nav-global nav > ul {
    list-style: none;
    margin: 0;
    padding: 0;
  }

  .nav-global nav > ul,
  .nav-global nav > ul > li,
  .nav-global nav > ul > li > a,
  .nav-global-apps-dropdown-container {
    align-items: center;
    display: inline-flex;
    height: 100%;
  }

  .nav-global-apps-dropdown-container {
    position: relative;
  }

  .nav-global nav > ul > li > a {
    padding: var(--nav-global-link-padding-y) var(--nav-global-link-padding-x);
  }

  .nav-global nav > a.is-active,
  .nav-global nav > a.is-active svg,
  .nav-global nav > ul > li > a.is-active,
  .nav-global .nav-global-link-active,
  .nav-global .nav-global-link-active svg {
    color: var(--nav-global-color-text-active) !important;
    fill: var(--nav-global-color-text-active);
    font-variation-settings: 'wght' 500;
  }

  .nav-global .nav-global-links-right {
    margin-left: auto;
  }

  /* Logo. */
  .nav-global a.nav-global-logo {
    margin-right: var(--nav-global-spacer);
    position: relative;
    top: 2px;
  }

  .nav-global a.nav-global-logo strong {
    margin-inline: var(--nav-global-spacer-sm);
    font-size: 18px;
  }

  .nav-global .nav-global-logo svg {
    height: 21px;
  }

  .nav-global a.nav-global-logo svg {
    position: relative;
    top: -4px;
  }

  .nav-global svg {
    fill: var(--nav-global-color-text);
    transition: fill var(--nav-global-transition-speed) ease-out;
  }

  .nav-global .nav-global-logo:hover svg {
    fill: white;
  }

  /* Apps button. */
  .nav-global button,
  .nav-global .nav-global-btn {
    -webkit-appearance: button;

    align-items: center;
    background-color: transparent;
    border-radius: var(--nav-global-border-radius);
    border: 0;
    color: var(--nav-global-color-button-text);
    cursor: pointer;
    display: inline-flex;
    font: inherit;
    height: var(--nav-global-button-height);
    margin: 0;
    outline: 0;
    overflow: visible;
    padding: var(--nav-global-spacer-xs) var(--nav-global-spacer);
    text-transform: none;
    transition: background-color var(--nav-global-transition-speed) ease-out, color var(--nav-global-transition-speed) ease-out, transform var(--nav-global-transition-speed) ease-out;
    white-space: nowrap;
  }

  .nav-global button span,
  .nav-global .nav-global-btn span {
    white-space: nowrap;
  }

  .nav-global button:hover,
  .nav-global .nav-global-btn:hover {
    background-color: var(--nav-global-color-button-bg-hover);
    color: var(--nav-global-color-text-hover);
    cursor: pointer;
  }

  .nav-global button.nav-global-btn-active,
  .nav-global .nav-global-btn.nav-global-btn-active {
    background-color: var(--nav-global-color-primary-bg);
    color: var(--nav-global-color-primary);
  }

  .nav-global button.nav-global-btn-active svg,
  .nav-global .nav-global-btn.nav-global-btn-active svg {
    fill: var(--nav-global-color-primary);
  }

  .nav-global .nav-global-icon {
    height: 20px;
    pointer-events: none;
    width: 20px;
  }

  .nav-global-icon-dropdown-toggle {
    margin-left: var(--nav-global-spacer-xs);
  }

  .nav-global button:hover svg,
  .nav-global .nav-global-btn:hover svg {
    fill: white;
  }

  /* Apps dropdown menu. */
  .nav-global .nav-global-apps-menu {
    background-color: var(--nav-global-color-menu-bg);
    border-radius: var(--nav-global-border-radius-lg);
    border: thin solid var(--nav-global-color-menu-border);
    box-shadow: var(--nav-global-box-shadow-menu);
    display: none;
    padding: var(--nav-global-spacer-sm);
    position: absolute;
    right: 0;
    top: calc(100% + 15px);
    visibility: hidden;
    width: 640px;
    z-index: var(--nav-global-color-menu-zindex);
  }

  .nav-global .nav-global-dropdown.is-visible {
    display: block;
    visibility: visible;
  }

  /* Tiny triangle in the corner. */
  .nav-global .nav-global-apps-menu::before {
    background-color: var(--nav-global-color-menu-bg);
    border-radius: 3px;
    border: 2px var(--nav-global-color-menu-bg) solid;
    content: '';
    display: block;
    height: .85rem;
    position: absolute;
    right: .85rem;
    top: -0.25rem;
    transform: rotate(45deg);
    width: 1rem;
    z-index: -1;
  }

  .nav-global .nav-global-apps-menu ul {
    border-bottom: 2px solid rgba(255, 255, 255, .05);
    display: grid;
    gap: var(--nav-global-spacer-sm);
    grid-template-columns: repeat(2, 1fr);
    list-style: none;
    margin: 0 0 var(--nav-global-spacer-xs) 0;
    padding: var(--nav-global-spacer-xs) 0 var(--nav-global-spacer-sm) 0;
  }

  .nav-global .nav-global-apps-menu ul>li>a {
    border-radius: var(--nav-global-border-radius-lg);
    display: flex;
    flex: 1;
    height: 100%;
  }

  .nav-global .nav-global-apps-menu ul>li>a:hover {
    background-color: rgba(255, 255, 255, .05);
    color: var(--nav-global-color-text-active);
    box-shadow: var(--nav-global-box-shadow-menu-item);
  }

  .nav-global .nav-global-apps-menu ul>li>a:hover h4,
  .nav-global .nav-global-apps-menu ul>li>a:hover svg {
    color: var(--nav-global-color-primary);
    fill: var(--nav-global-color-primary);
  }

  .nav-global .nav-global-apps-menu h3 {
    color: white;
    display: inline-block;
    font-size: 13px;
    line-height: 18px;
    margin: 0;
    opacity: .3;
    padding-left: var(--nav-global-spacer);
  }

  .nav-global .nav-global-apps-menu h4 {
    color: var(--nav-global-color-text-highlight);
    font-size: 17px;
    line-height: 18px;
    margin: var(--nav-global-spacer-xs) 0 0;
    padding: var(--nav-global-spacer-sm) var(--nav-global-spacer) 0;
    transition: color var(--nav-global-transition-speed) ease-out;
  }

  .nav-global .nav-global-apps-menu p {
    font-size: 15px;
    line-height: 20px;
    margin: 0;
    opacity: .8;
    padding: var(--nav-global-spacer-xs) var(--nav-global-spacer) var(--nav-global-spacer-sm);
  }

  .nav-global .nav-global-apps-menu figure {
    margin: var(--nav-global-spacer) 0 0 var(--nav-global-spacer);
  }

  .nav-global .nav-global-apps-menu ul>li>a svg {
    position: relative;
    top: -2px;
  }

  /* Donate section of the menu. */
  .nav-global .nav-global-apps-menu-section-donate ul {
    border: none;
    margin-bottom: 0;
    padding-bottom: 0;
  }

  .nav-global .nav-global-apps-menu-section-donate a svg {
    fill: hsl(352, 90%, 62%) !important;
    transition: transform var(--nav-global-transition-speed) ease-out;
  }

  .nav-global .nav-global-apps-menu-section-donate ul>li:first-child>a {
    background-color: hsla(352deg, 90%, 42%, .2);
  }

  .nav-global .nav-global-apps-menu-section-donate ul>li:first-child>a:hover {
    background-color: hsla(352deg, 90%, 42%, .5);
  }

  .nav-global .nav-global-apps-menu-section-donate ul>li:first-child>a:hover svg {
    fill: hsl(352, 90%, 72%) !important;
    transform: scale(1.2);
  }

  .nav-global .nav-global-apps-menu-section-donate ul>li:first-child>a:hover h4 {
    color: white;
  }

/* Mobile. */
.nav-global button.nav-global-logo {
  display: none;
  visibility: hidden;
}

@media (max-width: 767px) {

  .nav-global-apps-dropdown-container,
  .nav-global a.nav-global-logo {
    display: none;
  }

  .nav-global button.nav-global-logo {
    display: block;
    visibility: visible;
  }

  .nav-global .nav-global-nav-links {
    align-items: flex-start;
    background-color: var(--nav-global-color-menu-bg);
    border-radius: var(--nav-global-border-radius-lg);
    display: none;
    flex-direction: column;
    left: 1rem;
    padding: 0 var(--nav-global-spacer-sm);
    position: absolute;
    top: calc(100% + .5rem);
    visibility: visible;
    width: 10rem;
    z-index: var(--nav-global-color-menu-zindex);
  }

  .nav-global .nav-global-nav-links.is-visible {
    display: flex;
  }

  .nav-global .nav-global-nav-links::before {
    background-color: var(--nav-global-color-menu-bg);
    border-radius: 3px;
    border: 2px var(--nav-global-color-menu-bg) solid;
    content: '';
    display: block;
    height: 0.8rem;
    position: absolute;
    left: 1.5rem;
    top: -0.133rem;
    transform: rotate(45deg);
    width: 1rem;
    z-index: -1;
  }

  .nav-global nav>ul {
    height: initial;
  }

  .nav-global .nav-global-nav-links>li {
    border-bottom: 2px solid rgba(255, 255, 255, .05);
    width: 100%;
  }

  .nav-global .nav-global-nav-links>li:last-child {
    border: none;
  }

  .nav-global .nav-global-nav-links>li>a {
    padding-inline: 0;
    width: 100%;
  }
}
</style>

<style>
  /* Custom styling for code.blender.org */
  /* Make sure to start every line with ".nav-global"
   * so changes affect the developer navbar only. */

  /* Limit navbar width on large screens. */
  @media (min-width: 1200px) {
    .nav-global .nav-global-container {
      max-width: 1170px;
    }
  }
</style>

<div class="nav-global">
  <div class="nav-global-container">
    <nav>
      <a href="https://developer.blender.org/" class="nav-global-logo">
        <svg fill-rule="nonzero" viewBox="0 0 200 162.05">
          <path
            d="M61.1 104.56c.05 2.6.88 7.66 2.12 11.61a61.27 61.27 0 0 0 13.24 22.92 68.39 68.39 0 0 0 23.17 16.64 74.46 74.46 0 0 0 30.42 6.32 74.52 74.52 0 0 0 30.4-6.42 68.87 68.87 0 0 0 23.15-16.7 61.79 61.79 0 0 0 13.23-22.97 58.06 58.06 0 0 0 2.07-25.55 59.18 59.18 0 0 0-8.44-23.1 64.45 64.45 0 0 0-15.4-16.98h.02L112.76 2.46l-.16-.12c-4.09-3.14-10.96-3.13-15.46.02-4.55 3.18-5.07 8.44-1.02 11.75l-.02.02 26 21.14-79.23.08h-.1c-6.55.01-12.85 4.3-14.1 9.74-1.27 5.53 3.17 10.11 9.98 10.14v.02l40.15-.07-71.66 55-.27.2c-6.76 5.18-8.94 13.78-4.69 19.23 4.32 5.54 13.51 5.55 20.34.03l39.1-32s-.56 4.32-.52 6.91zm100.49 14.47c-8.06 8.2-19.34 12.86-31.54 12.89-12.23.02-23.5-4.6-31.57-12.79-3.93-4-6.83-8.59-8.61-13.48a35.57 35.57 0 0 1 2.34-29.25 39.1 39.1 0 0 1 9.58-11.4 44.68 44.68 0 0 1 28.24-9.85 44.59 44.59 0 0 1 28.24 9.77 38.94 38.94 0 0 1 9.58 11.36 35.58 35.58 0 0 1 4.33 14.18 35.1 35.1 0 0 1-1.98 15.05 37.7 37.7 0 0 1-8.61 13.52zm-57.6-27.91a23.55 23.55 0 0 1 8.55-16.68 28.45 28.45 0 0 1 18.39-6.57 28.5 28.5 0 0 1 18.38 6.57 23.57 23.57 0 0 1 8.55 16.67c.37 6.83-2.37 13.19-7.2 17.9a28.18 28.18 0 0 1-19.73 7.79c-7.83 0-14.84-3-19.75-7.8a23.13 23.13 0 0 1-7.19-17.88z" />
          <strong>Developer</strong>
        </svg>
      </a>

      <button class="nav-global-logo js-dropdown-toggle" data-toggle-menu-id="nav-global-nav-links">
        <svg fill-rule="nonzero" viewBox="0 0 850.2 162.05">
          <path d="M61.1 104.56c.05 2.6.88 7.66 2.12 11.61a61.27 61.27 0 0 0 13.24 22.92 68.39 68.39 0 0 0 23.17 16.64 74.46 74.46 0 0 0 30.42 6.32 74.52 74.52 0 0 0 30.4-6.42 68.87 68.87 0 0 0 23.15-16.7 61.79 61.79 0 0 0 13.23-22.97 58.06 58.06 0 0 0 2.07-25.55 59.18 59.18 0 0 0-8.44-23.1 64.45 64.45 0 0 0-15.4-16.98h.02L112.76 2.46l-.16-.12c-4.09-3.14-10.96-3.13-15.46.02-4.55 3.18-5.07 8.44-1.02 11.75l-.02.02 26 21.14-79.23.08h-.1c-6.55.01-12.85 4.3-14.1 9.74-1.27 5.53 3.17 10.11 9.98 10.14v.02l40.15-.07-71.66 55-.27.2c-6.76 5.18-8.94 13.78-4.69 19.23 4.32 5.54 13.51 5.55 20.34.03l39.1-32s-.56 4.32-.52 6.91zm100.49 14.47c-8.06 8.2-19.34 12.86-31.54 12.89-12.23.02-23.5-4.6-31.57-12.79-3.93-4-6.83-8.59-8.61-13.48a35.57 35.57 0 0 1 2.34-29.25 39.1 39.1 0 0 1 9.58-11.4 44.68 44.68 0 0 1 28.24-9.85 44.59 44.59 0 0 1 28.24 9.77 38.94 38.94 0 0 1 9.58 11.36 35.58 35.58 0 0 1 4.33 14.18 35.1 35.1 0 0 1-1.98 15.05 37.7 37.7 0 0 1-8.61 13.52zm-57.6-27.91a23.55 23.55 0 0 1 8.55-16.68 28.45 28.45 0 0 1 18.39-6.57 28.5 28.5 0 0 1 18.38 6.57 23.57 23.57 0 0 1 8.55 16.67c.37 6.83-2.37 13.19-7.2 17.9a28.18 28.18 0 0 1-19.73 7.79c-7.83 0-14.84-3-19.75-7.8a23.13 23.13 0 0 1-7.19-17.88z" />
          <path d="M829.17 133.76h-15.9V64.39h15.13l.77 13.59zM850.07 79q-1.47-.25-3.14-.38-1.6-.13-3.2-.13-5.26 0-8.8 1.92-3.45 1.86-5.25 5.39-1.8 3.46-2.11 8.2l-3.66.07q0-8.78 2.31-15.77 2.3-6.99 6.92-11.1 4.62-4.1 11.54-4.1 1.35 0 3.02.26 1.66.26 2.5.58zm-76.55 56.04q-10.32 0-17.82-4.42-7.5-4.5-11.55-12.06-4.03-7.63-4.03-17.05v-2.63q0-10.84 4.1-18.85 4.1-8.08 11.22-12.5 7.18-4.43 16.22-4.43 10 0 16.6 4.36 6.6 4.3 9.88 12 3.27 7.62 3.27 17.69V104h-53.67V92.53h37.96v-1.22q-.13-4.04-1.54-7.56-1.4-3.53-4.49-5.7-3.01-2.19-8.07-2.19-5.07 0-8.53 2.89-3.46 2.82-5.26 8.01-1.8 5.13-1.8 12.12v2.63q0 5.9 2.19 10.58 2.18 4.68 6.34 7.43 4.17 2.7 9.94 2.7 5.58 0 9.87-2.18 4.36-2.18 7.5-6.29l8.34 8.34q-3.27 4.93-9.87 8.97-6.54 3.98-16.8 3.98zm-88.67 25.39h-15.9V64.39h14.68l1.22 13.33zm45-60.72q0 10.13-3.13 18.15-3.08 7.95-9.1 12.56-5.97 4.62-14.63 4.62-8.72 0-14.49-4.23-5.7-4.3-8.9-11.8-3.21-7.5-4.43-17.12v-4.55q1.22-10.26 4.42-17.89 3.2-7.7 8.91-11.99 5.71-4.36 14.3-4.36 8.79 0 14.81 4.43 6.03 4.42 9.1 12.37 3.15 7.95 3.15 18.47zm-15.9-1.34q0-6.22-1.6-11.29-1.53-5.06-5-8.01-3.4-2.95-8.9-2.95-3.98 0-6.87 1.35-2.88 1.28-4.87 3.65-1.92 2.37-3.01 5.64-1.1 3.2-1.54 7.05v11.6q.77 4.62 2.56 8.47 1.8 3.85 5.13 6.16 3.4 2.24 8.72 2.24 5.51 0 8.91-3.08 3.4-3.14 4.94-8.2 1.54-5.13 1.54-11.29zm-122.51.06q0-10.13 3.84-18.08 3.85-7.95 11.03-12.57 7.25-4.68 17.38-4.68 10.25 0 17.5 4.68 7.24 4.62 11.03 12.57 3.84 7.95 3.84 18.08v1.35q0 10.06-3.84 18.08-3.79 7.95-11.03 12.56-7.18 4.62-17.38 4.62-10.19 0-17.43-4.62-7.25-4.61-11.1-12.56-3.84-8.02-3.84-18.08zm15.9 1.35q0 6.15 1.73 11.28 1.73 5.07 5.32 8.14 3.65 3.08 9.42 3.08 5.71 0 9.3-3.08 3.65-3.07 5.32-8.14 1.73-5.13 1.73-11.28v-1.35q0-6.09-1.73-11.22-1.67-5.13-5.32-8.2-3.65-3.15-9.42-3.15-5.71 0-9.36 3.14-3.6 3.08-5.33 8.21-1.66 5.13-1.66 11.22zm-29.69 33.98h-15.9V35.28h15.9zm-56.67 1.28q-10.33 0-17.83-4.42-7.5-4.5-11.54-12.06-4.04-7.63-4.04-17.05v-2.63q0-10.84 4.1-18.85 4.11-8.08 11.23-12.5 7.18-4.43 16.22-4.43 10 0 16.6 4.36 6.6 4.3 9.88 12 3.27 7.62 3.27 17.69V104H495.2V92.53h37.96v-1.22q-.13-4.04-1.54-7.56-1.41-3.53-4.49-5.7-3.01-2.19-8.08-2.19-5.06 0-8.52 2.89-3.47 2.82-5.26 8.01-1.8 5.13-1.8 12.12v2.63q0 5.9 2.18 10.58t6.35 7.43q4.17 2.7 9.94 2.7 5.58 0 9.87-2.18 4.36-2.18 7.5-6.29l8.34 8.34q-3.27 4.93-9.88 8.97-6.54 3.98-16.8 3.98zM464.3 64.39h16.48l-23.98 69.37h-10.26l1.03-12.57zm-12.25 57 .77 12.37h-10.19l-24.17-69.37H435zm-65.88 13.65q-10.32 0-17.82-4.42-7.5-4.5-11.54-12.06-4.04-7.63-4.04-17.05v-2.63q0-10.84 4.1-18.85 4.1-8.08 11.22-12.5 7.18-4.43 16.22-4.43 10 0 16.6 4.36 6.61 4.3 9.88 12 3.27 7.62 3.27 17.69V104H360.4V92.53h37.95v-1.22q-.12-4.04-1.53-7.56-1.42-3.53-4.5-5.7-3-2.19-8.07-2.19t-8.53 2.89q-3.46 2.82-5.26 8.01-1.8 5.13-1.8 12.12v2.63q0 5.9 2.19 10.58 2.18 4.68 6.35 7.43 4.16 2.7 9.93 2.7 5.58 0 9.88-2.18 4.36-2.18 7.5-6.29l8.33 8.34q-3.27 4.93-9.87 8.97-6.54 3.98-16.8 3.98zm-107.64-1.28.12-13.27h19.75q8.6 0 14.36-3.72 5.77-3.72 8.72-10.65 2.95-6.98 2.95-16.67v-4.87q0-9.94-2.95-16.8-2.88-6.86-8.59-10.45-5.7-3.59-13.91-3.59h-20.84V40.41h20.84q12.5 0 21.93 5.51 9.48 5.52 14.8 15.45 5.33 9.94 5.33 23.34v4.74q0 13.47-5.32 23.4-5.33 9.94-14.94 15.46-9.56 5.45-22.38 5.45zm9.23 0h-16.54V40.4h16.54z" />
        </svg>
        <svg class="nav-global-icon nav-global-icon-dropdown-toggle" height="100px" width="100px" viewBox="0 0 1000 1000">
          <path d="m 206.53824,376.41174 a 42,42 0 0 1 71,-29 l 221,220 220,-220 a 42,42 0 1 1 59,59 l -250,250 a 42,42 0 0 1 -59,0 l -250,-250 a 42,42 0 0 1 -12,-30 z"/>
        </svg>
      </button>

      <ul class="nav-global-nav-links nav-global-dropdown js-dropdown-menu" id="nav-global-nav-links">
        <li>
          <a href="https://projects.blender.org">Projects</a>
        </li>
        <li>
          <a href="https://wiki.blender.org" class="nav-global-link-active">Docs</a>
        </li>
        <li>
          <a href="https://code.blender.org">Blog</a>
        </li>
        <li>
          <a href="https://devtalk.blender.org">Forum</a>
        </li>
        <li>
          <a href="https://builder.blender.org">Builds</a>
        </li>
      </ul>

      <ul class="nav-global-links-right">
        <li>
          <div class="nav-global-apps-dropdown-container">
            <button class="js-dropdown-toggle" data-toggle-menu-id="nav-global-apps-menu">
              <svg class="nav-global-icon" height="100px" width="100px" viewBox="0 0 1000 1000">
                <path
                  d="m 150.5,899 a 50,50 0 0 1 -49,-50 V 749 a 50,50 0 0 1 49,-50 h 100 a 50,50 0 0 1 50,50 v 100 a 50,50 0 0 1 -50,50 z m 299,0 a 50,50 0 0 1 -50,-50 V 749 a 50,50 0 0 1 50,-50 h 100 a 50,50 0 0 1 50,50 v 100 a 50,50 0 0 1 -50,50 z m 299,0 a 50,50 0 0 1 -50,-50 V 749 a 50,50 0 0 1 50,-50 h 100 a 50,50 0 0 1 50,50 v 100 a 50,50 0 0 1 -50,50 z m -598,-299 a 50,50 0 0 1 -49,-50 V 450 a 50,50 0 0 1 49,-50 h 100 a 50,50 0 0 1 50,50 v 100 a 50,50 0 0 1 -50,50 z m 299,0 a 50,50 0 0 1 -50,-50 V 450 a 50,50 0 0 1 50,-50 h 100 a 50,50 0 0 1 50,50 v 100 a 50,50 0 0 1 -50,50 z m 299,0 a 50,50 0 0 1 -50,-50 V 450 a 50,50 0 0 1 50,-50 h 100 a 50,50 0 0 1 50,50 v 100 a 50,50 0 0 1 -50,50 z m -598,-299 a 50,50 0 0 1 -49,-50 V 151 a 50,50 0 0 1 49,-50 h 100 a 50,50 0 0 1 50,50 v 100 a 50,50 0 0 1 -50,50 z m 299,0 a 50,50 0 0 1 -50,-50 V 151 a 50,50 0 0 1 50,-50 h 100 a 50,50 0 0 1 50,50 v 100 a 50,50 0 0 1 -50,50 z m 299,0 a 50,50 0 0 1 -50,-50 V 151 a 50,50 0 0 1 50,-50 h 100 a 50,50 0 0 1 50,50 v 100 a 50,50 0 0 1 -50,50 z"/>
              </svg>
            </button>

            <div class="nav-global-apps-menu nav-global-dropdown js-dropdown-menu" id="nav-global-apps-menu">
              <h3>BLENDER.ORG</h3>
              <ul>
                <li>
                  <a href="https://www.blender.org/download/" target="_blank">
                    <figure>
                      <svg class="nav-global-icon" height="100px" width="100px" viewBox="0 0 1000 1000">
                        <path
                          d="m 49.15424,599.52895 a 50.360431,50.360431 0 0 0 -49.16137168,50.36043 v 200.24266 c 0,81.53594 68.34629768,149.88226 149.88223168,149.88226 h 700.2498 c 81.53593,0 149.8822,-68.34632 149.8822,-149.88226 V 649.88938 a 50.360431,50.360431 0 1 0 -100.72083,0 v 200.24266 c 0,27.57834 -21.58304,49.16138 -49.16137,49.16138 H 149.8751 c -27.57833,0 -49.16137,-21.58304 -49.16137,-49.16138 V 649.88938 A 50.360431,50.360431 0 0 0 49.15424,599.52895 Z M 249.3969,350.12491 a 50.360431,50.360431 0 0 0 -34.77267,85.13311 l 250.60309,249.40404 a 50.360431,50.360431 0 0 0 70.74442,0 L 785.37577,435.25802 A 50.360431,50.360431 0 1 0 714.63136,364.51361 L 500,579.14497 285.36864,364.51361 A 50.360431,50.360431 0 0 0 249.3969,350.12491 Z M 498.80094,0 A 50.360431,50.360431 0 0 0 449.63957,50.360432 V 649.88938 a 50.360431,50.360431 0 1 0 100.72086,0 V 50.360432 A 50.360431,50.360431 0 0 0 498.80094,0 Z"
                          style="stroke-width:1.19906" />
                      </svg>
                    </figure>
                    <div>
                      <h4>Download</h4>
                      <p>Get the latest Blender, older versions, or experimental builds.</p>
                    </div>
                  </a>
                </li>
                <li>
                  <a href="https://www.blender.org/download/releases/" target="_blank">
                    <div>
                      <h4>What's New</h4>
                      <p>Stay up-to-date with the new features in the latest Blender releases.</p>
                    </div>
                  </a>
                </li>
              </ul>

              <h3>RESOURCES</h3>
              <ul>
                <li>
                  <a href="https://studio.blender.org/" target="_blank">
                    <figure>
                      <svg class="nav-global-icon" height="100px" width="100px" viewBox="0 0 1000 1000">
                        <path
                          d="m 146.70939,1.6802353 c -78.362959,0 -143.678322,64.2057377 -143.6783209,143.6570547 -7.2533835,268.45385 0,463.93349 0,709.63356 0,79.45132 65.3153619,143.65705 143.6783209,143.65705 266.17757,0.51388 460.32009,0 709.61228,0 79.45134,0 143.67832,-64.20573 143.67832,-143.65705 0.37471,-118.45983 0,-235.03162 0,-353.72203 0.017,-0.72264 0.017,-1.4456 0,-2.16825 0.43351,-118.60776 0,-235.80643 0,-353.74328 0,-79.451317 -64.22698,-143.6570547 -143.67832,-143.6570547 -241.21275,-1.18614431 -498.91438,-0.041532 -709.61228,0 z m 0,90.3436617 h 82.71228 V 228.07083 H 93.374735 v -82.73354 c 0,-30.47448 22.860165,-53.313393 53.334655,-53.313393 z m 173.05594,0 h 363.5004 c -5.81542,127.740813 0,236.658243 0,362.416273 h -363.5004 c 0.39671,-121.62159 0,-241.06277 0,-362.416273 z m 453.84406,0 h 82.71228 c 30.4745,0 53.33466,22.838913 53.33466,53.313393 v 82.73354 H 773.60939 Z M 93.374735,318.39324 H 229.42167 V 454.44017 H 93.374735 Z m 680.234655,0 H 909.65633 V 454.44017 H 773.60939 Z M 93.374735,545.86796 H 229.42167 V 681.91489 H 93.374735 Z m 226.390595,0 h 363.5004 c -5.81534,127.74773 0,236.67164 0,362.43753 h -363.5004 c 0.3967,-121.62867 0,-241.07685 0,-362.43753 z m 453.84406,0 H 909.65633 V 681.91489 H 773.60939 Z M 93.374735,772.25856 H 229.42167 v 136.04693 h -82.71228 c -30.47449,0 -53.334655,-22.86016 -53.334655,-53.33464 z m 680.234655,0 h 136.04694 v 82.71229 c 0,30.47448 -22.86016,53.33464 -53.33466,53.33464 h -82.71228 z"
                          style="stroke-width:1.08838" />
                      </svg>
                    </figure>
                    <div>
                      <h4>Blender Studio</h4>
                      <p>Access production assets and knowledge from the open movies.</p>
                    </div>
                  </a>
                </li>
                <li>
                  <a href="https://docs.blender.org/manual/en/latest/" target="_blank">
                    <div>
                      <h4>Manual</h4>
                      <p>Documentation on the usage and features in Blender.</p>
                    </div>
                  </a>
                </li>
              </ul>

              <h3>DEVELOPMENT</h3>
              <ul>
                <li>
                  <a href="https://code.blender.org/" target="_blank">
                    <figure>
                      <svg class="nav-global-icon" height="100px" width="100px" viewBox="0 0 1000 1000">
                        <path
                          d="m 683.36434,818.19976 a 45.841084,45.841084 0 0 1 -33.83509,-13.09745 45.841084,45.841084 0 0 1 0,-64.39581 L 890.74067,499.49508 649.52925,259.37512 a 45.841084,45.841084 0 0 1 0,-64.39582 45.841084,45.841084 0 0 1 64.39581,0 l 272.8636,272.8636 a 45.841084,45.841084 0 0 1 0,64.39581 l -272.8636,272.8636 a 45.841084,45.841084 0 0 1 -30.56072,13.09745 z m -363.45431,0 A 45.841084,45.841084 0 0 1 286.07494,805.10231 L 13.211339,532.23871 a 45.841084,45.841084 0 0 1 0,-64.39581 L 286.07494,194.9793 a 45.841084,45.841084 0 0 1 64.39581,0 45.841084,45.841084 0 0 1 0,64.39582 L 109.25933,499.49508 350.47075,740.7065 a 45.841084,45.841084 0 0 1 0,64.39581 45.841084,45.841084 0 0 1 -30.56072,13.09745 z"
                          style="stroke-width:1.09145" />
                      </svg>
                    </figure>
                    <div>
                      <h4>Developers Blog</h4>
                      <p>Latest development updates, by Blender developers.</p>
                    </div>
                  </a>
                </li>
                <li>
                  <a href="https://wiki.blender.org/" target="_blank">
                    <div>
                      <h4>Documentation</h4>
                      <p>Guidelines, release notes and development docs.</p>
                    </div>
                  </a>
                </li>
              </ul>

              <ul>
                <li>
                  <a href="https://opendata.blender.org/" target="_blank">
                    <figure>
                      <svg class="nav-global-icon" height="100px" width="100px" viewBox="0 0 1000 1000">
                        <path
                          d="M 499.99424,0 A 55.30474,55.30474 0 0 0 444.6895,55.30474 V 944.69526 A 55.30474,55.30474 0 0 0 499.99424,1000 55.30474,55.30474 0 0 0 555.29898,944.69526 V 55.30474 A 55.30474,55.30474 0 0 0 499.99424,0 Z m 332.95711,332.95711 a 55.30474,55.30474 0 0 0 -55.30474,56.43341 V 944.69526 A 55.30474,55.30474 0 0 0 832.95135,1000 55.30474,55.30474 0 0 0 888.25609,944.69526 V 389.39052 A 55.30474,55.30474 0 0 0 832.95135,332.95711 Z M 167.03713,555.30474 a 55.30474,55.30474 0 0 0 -55.30474,55.30474 V 944.69526 A 55.30474,55.30474 0 0 0 167.03713,1000 55.30474,55.30474 0 0 0 222.34187,944.69526 V 610.60948 a 55.30474,55.30474 0 0 0 -55.30474,-55.30474 z"
                          style="stroke-width:1.12867" />
                      </svg>
                    </figure>
                    <div>
                      <h4>Benchmark</h4>
                      <p>A platform to collect and share results of the Blender Benchmark.</p>
                    </div>
                  </a>
                </li>
                <li>
                  <a href="https://conference.blender.org/" target="_blank">
                    <div>
                      <h4>Blender Conference</h4>
                      <p>The yearly event that brings the community together.</p>
                    </div>
                  </a>
                </li>
              </ul>

              <div class="nav-global-apps-menu-section-donate">
                <h3>DONATE</h3>
                <ul>
                  <li>
                    <a href="https://fund.blender.org/" target="_blank">
                      <figure>
                        <svg class="nav-global-icon" height="100px" width="100px" viewBox="0 0 1000 1000">
                          <path
                            d="M 273.67169,58.416076 C 201.59785,62.59427 135.79129,94.975269 86.697523,145.11359 37.603742,194.20736 4.1781939,260.01391 0,332.08775 -4.1781926,403.11704 22.980065,480.41362 86.697523,545.17562 l 45.960127,45.96013 339.47823,338.43367 a 43.871033,43.871033 0 0 0 61.62835,0 L 872.1979,591.13575 918.15804,545.17562 c 109.67766,-110.72213 109.67766,-290.38445 0,-400.06203 -110.72213,-110.722127 -290.38445,-110.722127 -400.06204,0 l -15.66822,14.62368 -15.66822,-14.62368 C 423.04211,80.351592 345.74553,53.193334 273.67169,58.416076 Z m 5.22274,86.697514 c 48.04922,-3.13365 98.18754,12.53458 146.23677,60.5838 l 47.00468,47.00468 a 43.871033,43.871033 0 0 0 61.62835,0 l 45.96013,-47.00468 c 76.25204,-76.25203 199.50874,-76.25203 276.80532,0 77.29658,77.29658 77.29658,200.5533 0,277.84988 L 810.56956,529.50739 502.42778,837.64917 194.286,529.50739 148.32588,483.54727 C 100.27665,434.45349 84.608431,384.31516 86.697523,336.26594 c 3.133646,-47.00467 26.113717,-95.0539 61.628357,-130.56855 35.51464,-35.51464 82.51932,-58.49471 130.56855,-60.5838 z"
                            style="stroke-width:1.04455" />
                        </svg>
                      </figure>
                      <div>
                        <h4>Development Fund</h4>
                        <p>Support core development with a monthly contribution.</p>
                      </div>
                    </a>
                  </li>
                  <li>
                    <a href="https://www.blender.org/about/donations/" target="_blank">
                      <div>
                        <h4>One-time Donations</h4>
                        <p>Perform a single donation with more payment options available.</p>
                      </div>
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </li>
      </ul>
    </nav>
  </div>
</div>

<script>
  const dropdownToggles = document.getElementsByClassName("js-dropdown-toggle");
  const btnActiveClass = 'nav-global-btn-active';
  const isVisibleClass = 'is-visible';

  /* Hide all dropdowns. */
  function dropdownHideAll() {
    const dropdownMenus = document.getElementsByClassName("js-dropdown-menu");

    if (dropdownMenus) {
      for (let i = 0; i < dropdownMenus.length; i++) {
        dropdownMenus[i].classList.remove(isVisibleClass);
      }
    }

    /* Remove styling from all dropdown toggles. */
    for (let i = 0; i < dropdownToggles.length; i++) {
      dropdownToggles[i].classList.remove(btnActiveClass);
    }
  }

  for (let i = 0; i < dropdownToggles.length; i++) {
    dropdownToggles[i].addEventListener("click", function (e) {
      e.stopPropagation();

      const dropdownId = this.getAttribute('data-toggle-menu-id');
      const el = document.getElementById(dropdownId);

      if (el) {
        /* If the button is already active, remove styling. */
        if (el.classList.contains(isVisibleClass)) {
          dropdownHideAll();
        } else {
          /* Style button as active and show menu. */
          this.classList.add(btnActiveClass);
          el.classList.add(isVisibleClass);
        }
      }
    });
  }

  /* Hide all dropdowns when clicking anywhere except menus. */
  document.body.addEventListener("click", function (e) {
    if (!e.target.classList.contains("js-dropdown-menu")) {
      dropdownHideAll();
    }
  });

  /* Hide all dropdowns when pressing Esc. */
  window.addEventListener('keydown', function (event) {
    if (event.key === 'Escape') {
      dropdownHideAll();
    }
  });
</script>

		<nav class="navbar navbar-expand flex-column flex-md-row bd-navbar">
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>

			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav mr-auto">
					<li class="nav-item"><a class="nav-link" href="https://wiki.blender.org/">Developer Documentation</a></li>
				</ul>
				<div>
<ul class="navbar-nav"><li id="ca-view" class="nav-item"><a href="VSE.html" redundant="1" class="nav-link">View</a></li><li id="ca-viewsource" class="nav-item"><a href="https://wiki.blender.org/w/index.php?title=Source/VSE&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e" class="nav-link">View source</a></li><li id="ca-history" class="nav-item"><a href="https://wiki.blender.org/w/index.php?title=Source/VSE&amp;action=history" title="Past revisions of this page [h]" accesskey="h" class="nav-link">History</a></li><li class="nav-item"><li class="nav-item dropdown" id="p-personal"><a class="nav-link dropdown-toggle" role="button" data-toggle="dropdown">Personal tools</a><div class="dropdown-menu dropdown-menu-right"><span id="pt-login"><a href="https://wiki.blender.org/w/index.php?title=Special:UserLogin&amp;returnto=Source%2FVSE" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o" class="dropdown-item">Log in</a></span></div></li></li></ul>				</div>
			</div>
		</nav>



		<div id="mw-wrapper" class="container-fluid">
			<div class="row flex-xl-nowrap">
				<div class="col-12 col-md-3 col-xl-2 bd-sidebar">
					<form action="https://wiki.blender.org/w/index.php" role="search" class="bd-search d-flex align-items-center" id="p-search"><input type="hidden" value="Special:Search" name="title"/><input type="search" name="search" placeholder="Search..." title="Search Blender Developer Wiki [f]" accesskey="f" id="searchInput" class="form-control ds-input" autocomplete="off"/></form>										<div id="p-Building_Blender">
						<h5>Building Blender</h5>
						 <!-- If you do not want the words "Navigation" or "Tools" to appear, you can safely remove the line above. -->

											<ul>
					<li id="n-Windows"><a href="../Building_Blender/Windows.html">Windows</a></li><li id="n-macOS"><a href="../Building_Blender/Mac.html">macOS</a></li><li id="n-Linux"><a href="../Building_Blender/Linux.html">Linux</a></li>						</ul>
										</div>
										<div id="p-Develop">
						<h5>Develop</h5>
						 <!-- If you do not want the words "Navigation" or "Tools" to appear, you can safely remove the line above. -->

											<ul>
					<li id="n-Getting-Started"><a href="../Developer_Intro.html">Getting Started</a></li><li id="n-Code-Documentation"><a href="../Source.html">Code Documentation</a></li><li id="n-Style-Guide"><a href="../Style_Guide.html">Style Guide</a></li><li id="n-Release-Notes"><a href="../Reference/Release_Notes.html">Release Notes</a></li>						</ul>
										</div>
										<div id="p-Process">
						<h5>Process</h5>
						 <!-- If you do not want the words "Navigation" or "Tools" to appear, you can safely remove the line above. -->

											<ul>
					<li id="n-Communication"><a href="../Contact.html">Communication</a></li><li id="n-Modules"><a href="../Modules.html">Modules</a></li><li id="n-Bug-Tracker"><a href="../Process/Bug_Reports.html">Bug Tracker</a></li><li id="n-Code-Review"><a href="../Process/Contributing_Code.html">Code Review</a></li>						</ul>
										</div>
										<div id="p-More">
						<h5>More</h5>
						 <!-- If you do not want the words "Navigation" or "Tools" to appear, you can safely remove the line above. -->

											<ul>
					<li id="n-Google-Summer-of-Code"><a href="../GSoC.html">Google Summer of Code</a></li><li id="n-Python"><a href="../Special:RandomRootpage.html">Python</a></li><li id="n-FAQ"><a href="../FAQ.html">FAQ</a></li>						</ul>
										</div>
									</div>

								<div class="d-none d-xl-block col-xl-2 bd-toc">
					<div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="VSE.html#Video_Sequencer_Editor"><span class="tocnumber">1</span> <span class="toctext">Video Sequencer Editor</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="VSE.html#Code_Layout"><span class="tocnumber">1.1</span> <span class="toctext">Code Layout</span></a>
<ul>
<li class="toclevel-3 tocsection-3"><a href="VSE.html#Sequencer_core"><span class="tocnumber">1.1.1</span> <span class="toctext">Sequencer core</span></a></li>
<li class="toclevel-3 tocsection-4"><a href="VSE.html#Editor_code"><span class="tocnumber">1.1.2</span> <span class="toctext">Editor code</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-5"><a href="VSE.html#Data_storage"><span class="tocnumber">1.2</span> <span class="toctext">Data storage</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="VSE.html#Strip_data_layout"><span class="tocnumber">1.2.1</span> <span class="toctext">Strip data layout</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-7"><a href="VSE.html#Rendering"><span class="tocnumber">1.3</span> <span class="toctext">Rendering</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="VSE.html#Rendering_context"><span class="tocnumber">1.3.1</span> <span class="toctext">Rendering context</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="VSE.html#Strip_stack_rendering"><span class="tocnumber">1.3.2</span> <span class="toctext">Strip stack rendering</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="VSE.html#Individual_strip_rendering"><span class="tocnumber">1.3.3</span> <span class="toctext">Individual strip rendering</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="VSE.html#Preprocessing_stage"><span class="tocnumber">1.3.4</span> <span class="toctext">Preprocessing stage</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-12"><a href="VSE.html#Cache"><span class="tocnumber">1.4</span> <span class="toctext">Cache</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="VSE.html#RAM_cache_design"><span class="tocnumber">1.4.1</span> <span class="toctext">RAM cache design</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="VSE.html#Disk_cache_design"><span class="tocnumber">1.4.2</span> <span class="toctext">Disk cache design</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-15"><a href="VSE.html#Iterator"><span class="tocnumber">1.5</span> <span class="toctext">Iterator</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="VSE.html#Proxy_system"><span class="tocnumber">1.6</span> <span class="toctext">Proxy system</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="VSE.html#Prefetching"><span class="tocnumber">1.7</span> <span class="toctext">Prefetching</span></a>
<ul>
<li class="toclevel-3 tocsection-18"><a href="VSE.html#Startup_and_stop_procedure"><span class="tocnumber">1.7.1</span> <span class="toctext">Startup and stop procedure</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="VSE.html#Rendering_loop"><span class="tocnumber">1.7.2</span> <span class="toctext">Rendering loop</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="VSE.html#Cache_handling"><span class="tocnumber">1.7.3</span> <span class="toctext">Cache handling</span></a></li>
<li class="toclevel-3 tocsection-21"><a href="VSE.html#Limitations"><span class="tocnumber">1.7.4</span> <span class="toctext">Limitations</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-22"><a href="VSE.html#Thumbnails"><span class="tocnumber">1.8</span> <span class="toctext">Thumbnails</span></a></li>
</ul>
</li>
</ul>
</div>				</div>
				
								<div class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 bd-content" role="main">
					<div class="mw-indicators mw-body-content">
</div>
<h1 class="firstHeading">Source/VSE</h1>
					<div class="mw-body-content">
						<div id="contentSub"><p><span class="subpages">&lt; <a href="../Source.html" title="Source">Source</a></span></p><p></p></div><div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">

<h1><span class="mw-headline" id="Video_Sequencer_Editor">Video Sequencer Editor</span></h1>
<h2><span class="mw-headline" id="Code_Layout">Code Layout</span></h2>
<p>Main bulk of code is split in editor code and sequencer "core" code. In general, editor code should avoid accessing DNA fields directly and implementing own logic on these fields. This is because such code is usually shared with RNA functions and can miss calling necessary updates. Other related code is spread across codebase in RNA, transform code, dependency graph, scene functions, outliner and so on.
</p>
<h3><span class="mw-headline" id="Sequencer_core">Sequencer core</span></h3>
<table class="wikitable">

<tbody><tr>
<th>File</th>
<th>Use
</th></tr>
<tr>
<td>source/blender/sequencer/intern/clipboard.c</td>
<td>Provides copy/paste functionality.
</td></tr>
<tr>
<td>source/blender/sequencer/intern/disk_cache.c</td>
<td>Cache system extension that allows disk storage.
</td></tr>
<tr>
<td>source/blender/sequencer/intern/effects.c</td>
<td>Effect strips implementations.
</td></tr>
<tr>
<td>source/blender/sequencer/intern/image_cache.c</td>
<td>Cache system.
</td></tr>
<tr>
<td>source/blender/sequencer/intern/iterator.c</td>
<td>Strip Collection/Iterator.
</td></tr>
<tr>
<td>source/blender/sequencer/intern/modifier.c</td>
<td>Strip modifiers.
</td></tr>
<tr>
<td>source/blender/sequencer/intern/multiview.c</td>
<td>Utility functions for multiview images/movies.
</td></tr>
<tr>
<td>source/blender/sequencer/intern/prefetch.c</td>
<td>Prefetching system.
</td></tr>
<tr>
<td>source/blender/sequencer/intern/proxy.c</td>
<td>Proxy system.
</td></tr>
<tr>
<td>source/blender/sequencer/intern/proxy_job.c</td>
<td>Proxy system job.
</td></tr>
<tr>
<td>source/blender/sequencer/intern/render.c</td>
<td>Rendering pipeline and utility functions.
</td></tr>
<tr>
<td>source/blender/sequencer/intern/sequence_lookup.c</td>
<td>Strip name lookup cache, used to improve anmimation evaluation performance.
</td></tr>
<tr>
<td>source/blender/sequencer/intern/sequencer.c</td>
<td>Sequencer data management functions.
</td></tr>
<tr>
<td>source/blender/sequencer/intern/sound.c</td>
<td>Utility functions for sound strips.
</td></tr>
<tr>
<td>source/blender/sequencer/intern/strip_add.c</td>
<td>Functions for adding strips.
</td></tr>
<tr>
<td>source/blender/sequencer/intern/strip_edit.c</td>
<td>Functions for changing strip data or properties. These functions are meant to be used by strip editing operators.
</td></tr>
<tr>
<td>source/blender/sequencer/intern/strip_relations.c</td>
<td>Various functions handling relationship between strips such as recursivity checks, dependency checks and hierarchy based data invalidation.
</td></tr>
<tr>
<td>source/blender/sequencer/intern/strip_select.c</td>
<td>Functions for handling selection.
</td></tr>
<tr>
<td>source/blender/sequencer/intern/strip_time.c</td>
<td>Functions for getting / setting time properties and time related update functions.
</td></tr>
<tr>
<td>source/blender/sequencer/intern/strip_transform.c</td>
<td>Functions mainly used by transform operators. Not only for strip transformation, but also for image transformation.
</td></tr>
<tr>
<td>source/blender/sequencer/intern/utils.c</td>
<td>Functions that do not quite fit any category above.
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Editor_code">Editor code</span></h3>
<table class="wikitable">

<tbody><tr>
<th>File</th>
<th>Use
</th></tr>
<tr>
<td>source/blender/editors/space_sequencer/sequencer_add.c</td>
<td>Strip add operators.
</td></tr>
<tr>
<td>source/blender/editors/space_sequencer/sequencer_buttons.c</td>
<td>Side panel elements.
</td></tr>
<tr>
<td>source/blender/editors/space_sequencer/sequencer_draw.c</td>
<td>Drawing code for preview and timeline.
</td></tr>
<tr>
<td>source/blender/editors/space_sequencer/sequencer_edit.c</td>
<td>Strip editing operators.
</td></tr>
<tr>
<td>source/blender/editors/space_sequencer/sequencer_modifier.c</td>
<td>Operators for handling modifiers.
</td></tr>
<tr>
<td>source/blender/editors/space_sequencer/sequencer_ops.c</td>
<td>Registering operators.
</td></tr>
<tr>
<td>source/blender/editors/space_sequencer/sequencer_preview.c</td>
<td>Job for drawing waveforms in sound strips.
</td></tr>
<tr>
<td>source/blender/editors/space_sequencer/sequencer_proxy.c</td>
<td>Operators for proxy setup and building.
</td></tr>
<tr>
<td>source/blender/editors/space_sequencer/sequencer_scopes.c</td>
<td>Functions for image analysis.
</td></tr>
<tr>
<td>source/blender/editors/space_sequencer/sequencer_select.c</td>
<td>Operators for strip selection.
</td></tr>
<tr>
<td>source/blender/editors/space_sequencer/sequencer_thumbnails.c</td>
<td>Job for rendering thumbnails.
</td></tr>
<tr>
<td>source/blender/editors/space_sequencer/sequencer_view.c</td>
<td>Operators for handling editor view.
</td></tr>
<tr>
<td>source/blender/editors/space_sequencer/space_sequencer.c</td>
<td>Editor setup code.
</td></tr></tbody></table>
<h2><span class="mw-headline" id="Data_storage">Data storage</span></h2>
<p>There are 2 main data structures containing sequencer data:
- <code>Editing</code> holds data that belongs to sequencer core, this is mainly strips.
- <code>SpaceSeq</code> holds data that belongs to sequencer editor. This defines editor state and configuration like render size, overlays and various view settings.
</p><p><code>Editing</code> itself belongs to <code>Scene-&gt;ed</code>. Most important field is <code>seqbase</code> which is linked list of all strips in timeline. <code>metastack</code> defines list of meta strips being edited. Runtime data for cache and prefetching are stored in <code>Editing</code> as well.
</p><p>Sequencer also uses <code>SequencerToolSettings</code> which are stored in <code>scene-&gt;toolsettings-&gt;sequencer_tool_settings</code>
</p>
<h3><span class="mw-headline" id="Strip_data_layout">Strip data layout</span></h3>
<p>This is quite confusing part of sequencer code - What is usually called a strip is represented by data structure called <code>Sequence</code>. There is also data structure with name <code>Strip</code> which defines data and some properties used by <code>Sequence</code>. Many fields in <code>Sequence</code> structure defines all properties of strip, mainly its position in timeline, type, properties for image processing or sound, pointers to other datablocks, effect data, etc.
</p><p>Data structures nested in <code>Sequence</code>:
</p>
<ul><li><code>Strip</code>: As mentioned above, this defines mainly file paths for image and movie strips along with some properties. These will be described below.</li>
<li><code>StripProxy</code>: Defines proxies for image or movie strips. Proxy size, quality, storage methods and timecode(for movie strips only).</li>
<li><code>StripTransform</code>: Image transformation properties.</li>
<li><code>StripCrop</code>: Image crop properties.</li>
<li><code>StripElem</code>: Source image or movie filename. In case of image sequences, array of this structure is used. Some basic information about media is stored here, such as image resolution or movie FPS. This information may not be accurate and should be used carefully.</li></ul>
<p>Offsets:
</p>
<ul><li><code>startdisp</code> / <code>enddisp</code> This indicates start and end frame of strip as it is truly presented in timeline. This is meant to be updated during editing. It is more of a runtime variable, but back then this wasn't differentiated by any means.</li>
<li><code>startstill</code> / <code>endstill</code> indicates how many frames are there in strip before/after actual image content. Strip can be longer than video for example - area with no image content should preview as still frame.</li>
<li><code>startofs</code> / <code>endofs</code> is offset from start of content. For example, to skip 200 frames from start, <code>startofs</code> should be set to <code>200</code>. If this happens there can be no still frames, but this is not prevented by design, it's prevented by implementation. This offset is also called split or cut in other words.</li>
<li><code>anim_startofs</code> / <code>anim_endofs</code> This is "hold split". If strip is hold split at 200 frames from start and start is extended, This will yield still frames.</li></ul>
<h2><span class="mw-headline" id="Rendering">Rendering</span></h2>
<p>Sequencer uses mostly CPU to produce images (exception is text and scene strip type). Because of this, only very basic image processing is viable for real time preview and many functions are optimized to do minimum possible amount of work.
</p>
<h3><span class="mw-headline" id="Rendering_context">Rendering context</span></h3>
<p><code>SeqRenderData</code> data structure is used to set up how image should be rendered. Most important fields are <code>rectx</code> and <code>recty</code> to define image resolution of final image. Fields <code>use_proxies</code> with <code>preview_render_size</code> are useful to configure what proxy size should be used or to downscale image resolution for better performance. See <code>ESpaceSeq_Proxy_RenderSize</code>.
</p>
<h3><span class="mw-headline" id="Strip_stack_rendering">Strip stack rendering</span></h3>
<p>Strips are rendered in sequence from bottom to top according to their channel (<code>seq-&gt;machine</code>). This is done in function <code>seq_render_strip_stack()</code> where strips are traversed from top to bottom first. If any strip can produce image on it's own, or it is stored in cache, traversing direction is reversed and strips are blended according to their blend mode.
Result of strip stack rendering is always 1 image, which is stored in cache separately as final image.
</p>
<h3><span class="mw-headline" id="Individual_strip_rendering">Individual strip rendering</span></h3>
<p>This is handled by function <code>seq_render_strip()</code>. First cache is checked if preprocessed or raw image exists. If no image is found in cache, function <code>do_render_strip_uncached()</code> dispatches rendering function based on strip type. This should give "raw" image which may not have correct resolution and does not have any image processing applied like modifiers or transformation. To apply required image processing, <code>seq_render_preprocess_ibuf()</code> is used. If no processing is required, image is returned as-is.
</p><p><br />
</p>
<h3><span class="mw-headline" id="Preprocessing_stage">Preprocessing stage</span></h3>
<p>This stage is mainly used to apply corrections on original image. This includes:
</p>
<ul><li>Deinterlacing</li>
<li>Transformation and cropping</li>
<li>Flipping</li>
<li>Adjusting saturation</li>
<li>Byte -&gt; float conversion</li>
<li>Pixel value multiplication</li>
<li>Modifiers</li></ul>
<p>Due to sequencer design, this stage is also used, when image size does not match rendering context size. This is because it can be done during transformation along with user defined properties at once and therefore much faster than doing these steps separately.
</p><p>Note: Effect strips can also use preprocessing stage. Strips that support Multiviev rendering need to apply preprocessing stage for each rendered image.
</p><p><br /> 
</p>
<h2><span class="mw-headline" id="Cache">Cache</span></h2>
<p>During rendering, images are stored in cache, to allow for faster redrawing when they are viewed repeatedly. Images are stored at various stages of processing, so this is also beneficial when tweaking properties of strips. Cache is also used for storage when prefetching is enabled. 
</p><p>RAM is normally used for storage, but disk cache is implemented to allow storage with greater capacity at expense of performance. Disk cache is designed to be extension of RAM cache on implementation level as well.
</p><p>Image caching can be configured globally or per strip with developer extras enabled. It is also possible to enable cache overlay in timeline(view-&gt;cache menu) to visualize cached(RAM only) images in time and per strip. This is useful for debugging not only cache but also to ensure consistency when doing rendering performance tests.
</p><p>Stages stored in cache:
</p>
<ul><li>Raw images: <code>SEQ_CACHE_STORE_RAW</code>.</li>
<li>Peprocessed images: <code>SEQ_CACHE_STORE_PREPROCESSED</code>.</li>
<li>Composited (2 strips blended together) images: <code>SEQ_CACHE_STORE_COMPOSITE</code>.</li>
<li>Final images (last blended image): <code>SEQ_CACHE_STORE_FINAL_OUT</code>. This image is copy of <code>SEQ_CACHE_STORE_COMPOSITE</code> stage and takes no additional memory to be stored.</li></ul>
<p>These are all stages in which image can be changed, however change in lower level will influence all subsequent images. This is handled on 2 levels: By cache invalidation functions, which traverse strips and invalidate(delete) images of dependant strips. Cache also links images within each frame, which helps with invalidation, but it should not be necessary.
</p><p><br />
</p>
<h3><span class="mw-headline" id="RAM_cache_design">RAM cache design</span></h3>
<p>Sequencer cache was originally using <code>MovieCache</code>, which works well with single strip, but it is quite limited otherwise. Main limitation for sequencer is memory usage limiting mechanism, which does free items on simple criteria like their age or distance from current frame. In sequencer however, there are more items that meet this condition and random items are freed. To further complicate this situation, not all images have same size in memory, which means that sometimes image can fail to be cached resulting in uneven caching with random images missing. 
</p><p>This is resolved by 2 changes:
</p>
<ul><li>Memory limit is not strictly obeyed. All images created during rendering are added to cache, even if the cache is already full. Only before caching SEQ_CACHE_STORE_FINAL_OUT, memory is freed.</li>
<li>Cached images for each frame are linked, which makes it possible to free them all at once, even if some of strips use speed effect which causes rendering of different frame number.</li></ul>
<p>To conserve memory usage, not all cached stages should be stored for longer term. Currently <code>SEQ_CACHE_STORE_PREPROCESSED</code> and <code>SEQ_CACHE_STORE_COMPOSITE</code> are marked as temporary, which means they will be freed when next frame is rendered. This still allows these stages to be useful when tweaking strip property and frame does not change for example.
</p><p>Another limitation was introduction of prefetching system, which works by filling RAM cache as much as possible in advance of current frame. For this to work reliably, change in image freeing priority must change from furthest cached frame to "ideally leftmost cached frame outside of prefetching area, otherwise rightmost frame outside of prefetching area".
</p><p>Latest addition to cache is thumbnail storage, which is rather hacked-in and ideally will be isolated in future. This cache "stage" or type is very similar to <code>SEQ_CACHE_STORE_RAW</code> in that it is valid for all strips that share same path to file. Ideally new cache system for such entries can be created which can be compatible with disk cache and cache invalidation mechanisms.
</p>
<h3><span class="mw-headline" id="Disk_cache_design">Disk cache design</span></h3>
<p>Disk cache is extension of RAM cache. Storage is configured in user preferences. 
</p><p>Main considerations for disk cache:
</p>
<ul><li>Images are stored pernamently until invalidated or removed due to disk space limits.</li>
<li>Multiple images are stored in 1 file to reduce cold read delays.</li>
<li>It must be possible to write images in random order, because rendering is not always sequential.</li>
<li>2 blend files should never use same disk cache path.</li>
<li>It should support most features as RAM cache, for example float images. Images must be recovered without any quality loss.</li></ul>
<p>To write images at random order, each cache file has header that maps file contents. This way file can always be appended.
</p><p>To ensure maximum possible integrity of cache, file name does contain values used by RAM cache to calculate hash, but these values are human readable. Path to cache files consists of blend file name, scene name and RAM cache creation timestamp and strip name. Example of typical path: <code>untitled.blend_seq_cache/SCScene-1638169261/SQtime.002/8-1920x1080-99%(0)-1.dcf</code>
</p><p>To future-proof the design, versioning system is implemented. Each blend file cache directory has <code>cache_version</code> file. If version is not matched, all files in cache directory are removed.
</p><p>Disk cache does support image compression with standard compression algorithms. During testing, these seems to be more effective than image codecs, especially lossless ones.
</p><p>To avoid unnecessary disk IO, cache directory structure is traversed and <code>DiskCacheFile</code> structure representing each file is stored in RAM. Every new cache file that is created is stored in RAM as well. This helps mainly when cache files are invalidated, so whole tree does not have to be traversed possibly during rendering.
</p>
<h2><span class="mw-headline" id="Iterator">Iterator</span></h2>
<p>To make work with sets of strips easier, iterator system can be used. Main design goal is to provide means to inline logic, instead of creating callback functions. <code>SeqCollection</code> structure defines a set of strips and can be iterated on by <code>SEQ_ITERATOR_FOREACH</code> macro, similar to <code>LISTBASE_FOREACH</code> macro. To create <code>SeqCollection</code>, most common queries are available, but custom functions can be created. Use of this iterator system is encouraged everywhere where maximum possible performance is not essential. Because <code>SeqCollection</code> can be reused multiple times and it can be passed as argument, it may be faster than looping over strips multiple times. 
</p><p>For cases where logic may be complicated such as working on strips not only selected by simple criteria, but also their relationships, there are functions for combining, filtering and expanding <code>SeqCollection</code>. This way a bulk of logic responsible for selecting strips that are operated on can be separated from functional logic which does change their data.
</p><p>Implementation should be well documented, but good example is for example <code>select_grouped_effect_link()</code>:
</p><p><br />
</p>
<pre>/* Select all strips within time range and with lower channel of initial selection. Then select
 * effect chains of these strips. */
static bool select_grouped_effect_link(SeqCollection *strips,
                                       ListBase *seqbase,
                                       Sequence *UNUSED(actseq),
                                       const int UNUSED(channel))
{
  /* Get collection of strips. */
  SEQ_filter_selected_strips(strips);
  const int selected_strip_count = SEQ_collection_len(strips);
  SEQ_collection_expand(seqbase, strips, query_lower_channel_strips);
  SEQ_collection_expand(seqbase, strips, SEQ_query_strip_effect_chain);

  /* Check if other strips will be affected. */
  const bool changed = SEQ_collection_len(strips) &gt; selected_strip_count;

  /* Actual logic. */
  Sequence *seq;
  SEQ_ITERATOR_FOREACH (seq, strips) {
    seq-&gt;flag |= SELECT;
  }

  return changed;
}
</pre>
<p><br />
This function is supplied with collection of strips, contents depend on whether operator is executed from preview where only visible strips are considered, or timeline, in which case all strips will be included.
First collection is filtered to only selected strips. Number of strips is saved for later comparison to check if this operation had any effect. 
Function <code>SEQ_collection_expand()</code> is used to expand original collection. In practice this means that each strip in sequencer is compared to each strip in provided collection. Callback query function then does selection based on its internal logic. in case of <code>query_lower_channel_strips()</code>, strip is selected if it is visually under strips from provided collection. in similar fashion, function <code>SEQ_query_strip_effect_chain</code> selects every strip, that has effect relationship to strips in provided collection. These are quite complicated selection criteria, that would be hard to parse if done by plain <code>LISTBASE_FOREACH</code> iterations.
Finally collection is iterated and operator logic is executed - strips are selected.
</p><p>Note, implementation of this design may change a bit, for example <code>SEQ_query_strip_effect_chain</code> may become standalone function, that will take <code>SeqCollection</code> as argument. Function <code>SEQ_collection_expand()</code> is used mainly because it does include logic to prevent infinite loops which are likely in more complicated queries.
</p>
<h2><span class="mw-headline" id="Proxy_system">Proxy system</span></h2>
<p>To optimize video files playback performance, sequencer uses proxy system which is available in movie clip editor too. Proxies are re-encoded video files with settings to get good scrubbing performance and they can have smaller resolution. Since proxy transcoding is standalone system, its inner workings won't be described in detail here, but rather its integration with sequencer. Same proxy system is used in movie clip editor.
</p><p>TODO:
</p>
<ul><li>Image strips</li>
<li>Generating editor side, sequencer side</li>
<li>How proxies are used</li></ul>
<p><br />
</p>
<h2><span class="mw-headline" id="Prefetching">Prefetching</span></h2>
<p>Prefetching can be used to improve consistency of playback speed if image processing demands are unevenly spread. This is done by rendering frames in advance in background job and filling cache up to its limit. This way overhead of drawing code is eliminated too, even though it's usually not significant.
</p>
<h3><span class="mw-headline" id="Startup_and_stop_procedure">Startup and stop procedure</span></h3>
<p>When prefetching is enabled, function <code>SEQ_render_give_ibuf()</code> which is responsible for rendering timeline content will try to start prefetching by calling function <code>seq_prefetch_start</code>. If prefetch thread is running, but it is suspended, it is resumed. On any update done to sequencer data that affects image output, prefetch must be stopped by calling <code>SEQ_prefetch_stop()</code>. This is done as a part of cache invalidation, but there are cases when it has to be done explicitly, for example on undo. When image is re-rendered after change, prefetching will restart with new data.
</p>
<h3><span class="mw-headline" id="Rendering_loop">Rendering loop</span></h3>
<p>Because DNA structures may contain runtime data necessary for operation, prefetch operates on <code>Scene</code> copy, which contains sequencer data as well. It hosts its own dependency graph to evaluate data for each frame and a copy of <code>SeqRenderData</code> rendering context. This context is marked as for prefetching(<code>is_prefetch_render</code>), so another prefetching job is not created from prefetching thread. Finally function <code>seq_prefetch_frames()</code> is executed in a thread. Rendering loop uses dependency loop to evaluate all datablocks. There is call to <code>BKE_animsys_evaluate_animdata</code> which I am not entirely sure why it is needed as it shouldn't be. Function <code>SEQ_render_give_ibuf()</code> is called on copy of scene and rendering context. Rendering loop can be suspended by timeline scrubbing or cache being full. When there are no more frames to render or prefetching is disabled, job is terminated. Loop resumes or starts, when cache is freed again.
</p>
<h3><span class="mw-headline" id="Cache_handling">Cache handling</span></h3>
<p>Prefetching job has no prior information on where it should stop. This is because each frame may have different size in memory or frames may be missing. Further it does not know about total memory usage since it may change outside of sequencer. Because of this function <code>seq_prefetch_do_suspend()</code> polls function <code>seq_prefetch_is_cache_full()</code> on every iteration of rendering loop. If cache is full, thread will be suspended. Once cache is freed through startup procedure signal is sent to prefetching thread to check memory usage and resume render loop if possible. Unlike normal sequencer rendering procedure, prefetch job must store <code>SEQ_CACHE_STORE_FINAL_OUT</code> image regardless of memory usage. This is, because function <code>seq_cache_put_if_possible</code> would not store image if it's size is greater than available memory and therefore function <code>seq_prefetch_is_cache_full()</code> would never return <code>true</code>. Prefetch job relies on disregarding this limit, but since this will cause thread being suspended, it will never be crossed by large amount.
</p><p>Another important fact is, that each scene with sequencer data has it's own cache. This means, that calling function <code>SEQ_render_give_ibuf()</code> with copy of original data would store image with different context and it wouldn't be possible to get it from context that is used to draw UI. This is resolved by referencing original prefetch job in copied scene - <code>pfjob-&gt;scene_eval-&gt;ed-&gt;prefetch_job = pfjob;</code> In cache code original data can be accessed with function <code>seq_prefetch_get_original_context()</code>. This is not great way to resolve the issue though. 
</p><p>Finally, cache freeing strategy is changed from furthest cached frame to "ideally leftmost cached frame outside of prefetching area, otherwise rightmost frame outside of prefetching area". This is, because user can move current frame few frames before, inside or after prefetched area. This can also happen frequently, so freeing strategy should be least disruptive and preserve continuous flow of cached images as much as it can.
</p><p>To debug prefetching process, cache overlay is useful tool. To continuously update cache overlay, function <code>SEQ_prefetch_need_redraw</code> is polled from sequencer drawing code and adds notifier to redraw itself which creates event loop. Event loop is terminated when prefetching is suspended.
</p>
<h3><span class="mw-headline" id="Limitations">Limitations</span></h3>
<p>Currently 3D scene strips can't be prefetched. This is for 2 reasons - They use offscreen rendering, which requires interlock with main frame, which is not implemented. Even if background rendering would be used, problem is that dependency graph used by prefetch job can't be used to create dependency graph for render engine.
</p>
<h2><span class="mw-headline" id="Thumbnails">Thumbnails</span></h2>
<p>TODO
</p>
<!-- 
NewPP limit report
Cached time: 20240112105202
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.044 seconds
Real time usage: 0.044 seconds
Preprocessor visited node count: 86/1000000
Preprocessor generated node count: 92/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 0/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->
</div>
<!-- Saved in parser cache with key mw_wiki-mediawiki_:pcache:idhash:6289-0!canonical and timestamp 20240112105202 and revision id 30043
 -->
</div><div class="clearfix"></div><div class="printfooter">Retrieved from "<a dir="ltr" href="https://wiki.blender.org/w/index.php?title=Source/VSE&amp;oldid=30043">https://wiki.blender.org/w/index.php?title=Source/VSE&amp;oldid=30043</a>"</div>					</div>
				</div>
			</div>
		</div>

		<!-- Footer -->
		<footer class="footer pt-4">

			<!-- Footer Links -->
			<div class="container-fluid text-md-left">

				<!-- Grid row -->
				<div class="row">
					<div class="col-md-3 mt-md-0 mt-3"><h5 class="text-uppercase">info</h5><p id="footer-info-lastmod"> This page was last edited on 6 April 2022, at 17:33.</p><p id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</p></div><div class="col-md-3 mt-md-0 mt-3"><h5 class="text-uppercase">places</h5><ul id="footer-places" role="contentinfo"><li id="footer-places-privacy"><a href="https://wiki.blender.org/wiki/Blender_Developer_Wiki:Privacy_policy" title="Blender Developer Wiki:Privacy policy">Privacy policy</a></li><li id="footer-places-about"><a href="https://wiki.blender.org/wiki/Blender_Developer_Wiki:About" title="Blender Developer Wiki:About">About Blender Developer Wiki</a></li><li id="footer-places-disclaimer"><a href="https://wiki.blender.org/wiki/Blender_Developer_Wiki:General_disclaimer" title="Blender Developer Wiki:General disclaimer">Disclaimers</a></li></ul></div><div class="col-md-3 mt-md-0 mt-3"><h5 class="text-uppercase">Utilities</h5><ul id="p-tb"><li id="t-whatlinkshere"><a href="../Special:WhatLinksHere/Source/VSE.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="https://wiki.blender.org/wiki/Special:RecentChangesLinked/Source/VSE" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="../Special:SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://wiki.blender.org/w/index.php?title=Source/VSE&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://wiki.blender.org/w/index.php?title=Source/VSE&amp;oldid=30043" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://wiki.blender.org/w/index.php?title=Source/VSE&amp;action=info" title="More information about this page">Page information</a></li></ul></div><div class="col-md-3 mt-md-0 mt-3"><h5 class="text-uppercase">Navigation</h5><ul id="p-navigation"><li id="n-mainpage-description"><a href="../Main_Page.html" title="Visit the main page [z]" accesskey="z">Main page</a></li><li id="n-recentchanges"><a href="../Special:RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="../Special:Random.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li></ul></div>
				</div>
				<!-- Grid row -->

				<!-- Grid row -->
				<div class="row pt-4 pb-4">
					<div class="col">
						<!-- Copyright -->
						<div class="text-center">Creative freedom starts with Blender – The Free and Open Source 3D Creation Suite
						</div>
						<!-- Copyright -->
					</div>
				</div>
				<!-- Grid row -->

			</div>
			<!-- Footer Links -->
		</footer>
		<!-- Footer -->


		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.044","walltime":"0.044","ppvisitednodes":{"value":86,"limit":1000000},"ppgeneratednodes":{"value":92,"limit":1000000},"postexpandincludesize":{"value":0,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":0,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"cachereport":{"timestamp":"20240112105202","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":36});});</script>		<script defer src="https://static.cloudflareinsights.com/beacon.min.js/v84a3a4012de94ce1a686ba8c167c359c1696973893317" integrity="sha512-euoFGowhlaLqXsPWQ48qSkBSCFs3DPRyiwVu3FjR96cMPx+Fr+gpWRhIafcHwqwCqWS42RZhIudOvEI+Ckf6MA==" data-cf-beacon='{"rayId":"84453c9e8a86b78e","b":1,"version":"2023.10.0","token":"d5f49e4e21684977a6be2ac49670f7b1"}' crossorigin="anonymous"></script>
</body>
		</html>

		